import { Input, ViewChild, Directive, Injectable } from '@angular/core';
import * as i0 from "@angular/core";
// eslint-disable-next-line
export class ServoyBaseComponent {
    constructor(renderer, cdRef) {
        this.renderer = renderer;
        this.cdRef = cdRef;
        this.viewStateListeners = new Set();
        this.componentContributor = new ComponentContributor();
    }
    // final method, do not override
    ngOnInit() {
        this.initializeComponent();
        this.servoyApi.registerComponent(this);
    }
    // final method, do not override
    ngAfterViewInit() {
        this.initializeComponent();
        if (this.elementRef && this.changes) {
            this.svyOnChanges(this.changes);
            this.changes = null;
        }
        this.cdRef.detectChanges();
    }
    // final method, do not override
    ngOnChanges(changes) {
        this.initializeComponent();
        if (!this.elementRef) {
            if (this.changes == null) {
                this.changes = changes;
            }
            else {
                for (const property of Object.keys(changes)) {
                    this.changes[property] = changes[property];
                }
            }
        }
        else {
            if (this.changes == null) {
                this.svyOnChanges(changes);
            }
            else {
                for (const property of Object.keys(changes)) {
                    this.changes[property] = changes[property];
                }
                this.svyOnChanges(this.changes);
                this.changes = null;
            }
        }
    }
    ngOnDestroy() {
        this.servoyApi.unRegisterComponent(this);
    }
    // our init event that is called when dom is ready
    svyOnInit() {
        this.addAttributes();
        this.componentContributor.componentCreated(this);
        this.viewStateListeners.forEach(listener => listener.afterViewInit());
    }
    // our change event that is called when dom is ready
    svyOnChanges(_changes) {
    }
    detectChanges() {
        this.cdRef.detectChanges();
    }
    /**
     * this should return the main native element (like the first div)
     */
    getNativeElement() {
        return this.elementRef ? this.elementRef.nativeElement : null;
    }
    /**
     * sub classes can return a different native child then the default main element.
     * used currently only for horizontal aligment
     */
    getNativeChild() {
        return this.elementRef.nativeElement;
    }
    getRenderer() {
        return this.renderer;
    }
    getWidth() {
        return this.getNativeElement().parentNode.parentNode.offsetWidth;
    }
    getHeight() {
        return this.getNativeElement().parentNode.parentNode.offsetHeight;
    }
    getLocationX() {
        return this.getNativeElement().parentNode.parentNode.offsetLeft;
    }
    getLocationY() {
        return this.getNativeElement().parentNode.parentNode.offsetTop;
    }
    addViewStateListener(listener) {
        this.viewStateListeners.add(listener);
    }
    removeViewStateListener(listener) {
        this.viewStateListeners.delete(listener);
    }
    initializeComponent() {
        if (!this.initialized && this.elementRef) {
            this.initialized = true;
            this.svyOnInit();
        }
    }
    addAttributes() {
        if (!this.servoyAttributes)
            return;
        for (const key of Object.keys(this.servoyAttributes)) {
            this.renderer.setAttribute(this.getNativeElement(), key, this.servoyAttributes[key]);
        }
    }
}
ServoyBaseComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.2", ngImport: i0, type: ServoyBaseComponent, deps: [{ token: i0.Renderer2 }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Directive });
ServoyBaseComponent.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.0.2", type: ServoyBaseComponent, inputs: { name: "name", servoyApi: "servoyApi", servoyAttributes: "servoyAttributes" }, viewQueries: [{ propertyName: "elementRef", first: true, predicate: ["element"], descendants: true }], usesOnChanges: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.2", ngImport: i0, type: ServoyBaseComponent, decorators: [{
            type: Directive
        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { name: [{
                type: Input
            }], servoyApi: [{
                type: Input
            }], servoyAttributes: [{
                type: Input
            }], elementRef: [{
                type: ViewChild,
                args: ['element', { static: false }]
            }] } });
export class ComponentContributor {
    componentCreated(component) {
        ComponentContributor.listeners.forEach(listener => listener.componentCreated(component));
    }
    addComponentListener(listener) {
        ComponentContributor.listeners.add(listener);
    }
}
ComponentContributor.listeners = new Set();
ComponentContributor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.2", ngImport: i0, type: ComponentContributor, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
ComponentContributor.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.0.2", ngImport: i0, type: ComponentContributor });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.2", ngImport: i0, type: ComponentContributor, decorators: [{
            type: Injectable
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZWNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3NlcnZveS1wdWJsaWMvc3JjL2xpYi9iYXNlY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBbUQsS0FBSyxFQUF5QixTQUFTLEVBQUUsU0FBUyxFQUFnQyxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7O0FBSTlLLDJCQUEyQjtBQUMzQixNQUFNLE9BQU8sbUJBQW1CO0lBWTVCLFlBQStCLFFBQW1CLEVBQVksS0FBd0I7UUFBdkQsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUFZLFVBQUssR0FBTCxLQUFLLENBQW1CO1FBTDlFLHVCQUFrQixHQUE0QixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBTTVELElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLG9CQUFvQixFQUFFLENBQUM7SUFDM0QsQ0FBQztJQUVELGdDQUFnQztJQUNoQyxRQUFRO1FBQ0osSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQsZ0NBQWdDO0lBQ2hDLGVBQWU7UUFDWCxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUMzQixJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNqQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNoQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztTQUN2QjtRQUNELElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVELGdDQUFnQztJQUNoQyxXQUFXLENBQUMsT0FBc0I7UUFDOUIsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbEIsSUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksRUFBRTtnQkFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7YUFDMUI7aUJBQU07Z0JBQ0gsS0FBSyxNQUFNLFFBQVEsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO29CQUN6QyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDOUM7YUFDSjtTQUNKO2FBQU07WUFDSCxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxFQUFFO2dCQUN0QixJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQzlCO2lCQUFNO2dCQUNILEtBQUssTUFBTSxRQUFRLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRTtvQkFDekMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQzlDO2dCQUNELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNoQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzthQUN2QjtTQUNKO0lBQ0wsQ0FBQztJQUVELFdBQVc7UUFDUCxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxrREFBa0Q7SUFDbEQsU0FBUztRQUNMLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsb0JBQW9CLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFFRCxvREFBb0Q7SUFDcEQsWUFBWSxDQUFDLFFBQXVCO0lBQ3BDLENBQUM7SUFFTSxhQUFhO1FBQ2hCLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUNEOztPQUVHO0lBQ0ksZ0JBQWdCO1FBQ25CLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNsRSxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksY0FBYztRQUNqQixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDO0lBQ3pDLENBQUM7SUFFTSxXQUFXO1FBQ2QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3pCLENBQUM7SUFFTSxRQUFRO1FBQ1gsT0FBUSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBMEIsQ0FBQyxXQUFXLENBQUM7SUFDdEYsQ0FBQztJQUVNLFNBQVM7UUFDWixPQUFRLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLFVBQVUsQ0FBQyxVQUEwQixDQUFDLFlBQVksQ0FBQztJQUN2RixDQUFDO0lBRU0sWUFBWTtRQUNmLE9BQVEsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsVUFBVSxDQUFDLFVBQTBCLENBQUMsVUFBVSxDQUFDO0lBQ3JGLENBQUM7SUFFTSxZQUFZO1FBQ2YsT0FBUSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBMEIsQ0FBQyxTQUFTLENBQUM7SUFDcEYsQ0FBQztJQUVNLG9CQUFvQixDQUFDLFFBQTRCO1FBQ3BELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVNLHVCQUF1QixDQUFDLFFBQTRCO1FBQ3ZELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVTLG1CQUFtQjtRQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ3RDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUNwQjtJQUNMLENBQUM7SUFFUyxhQUFhO1FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCO1lBQUUsT0FBTztRQUNuQyxLQUFLLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7WUFDakQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3pGO0lBQ0wsQ0FBQzs7Z0hBaklRLG1CQUFtQjtvR0FBbkIsbUJBQW1COzJGQUFuQixtQkFBbUI7a0JBRi9CLFNBQVM7Z0lBR0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csZ0JBQWdCO3NCQUF4QixLQUFLO2dCQUVtQyxVQUFVO3NCQUFsRCxTQUFTO3VCQUFDLFNBQVMsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7O0FBb0kzQyxNQUFNLE9BQU8sb0JBQW9CO0lBR3RCLGdCQUFnQixDQUFDLFNBQW1DO1FBQ3ZELG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUM3RixDQUFDO0lBRU0sb0JBQW9CLENBQUMsUUFBdUM7UUFDaEUsb0JBQW9CLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNoRCxDQUFDOztBQVJjLDhCQUFTLEdBQXVDLElBQUksR0FBRyxFQUFFLENBQUM7aUhBRGhFLG9CQUFvQjtxSEFBcEIsb0JBQW9COzJGQUFwQixvQkFBb0I7a0JBRGhDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgSW5wdXQsIFJlbmRlcmVyMiwgRWxlbWVudFJlZiwgVmlld0NoaWxkLCBEaXJlY3RpdmUsIENoYW5nZURldGVjdG9yUmVmLCBPbkRlc3Ryb3ksIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU2Vydm95QXBpIH0gZnJvbSAnLi9zZXJ2b3lfYXBpJztcclxuXHJcbkBEaXJlY3RpdmUoKVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcclxuZXhwb3J0IGNsYXNzIFNlcnZveUJhc2VDb21wb25lbnQ8VCBleHRlbmRzIEhUTUxFbGVtZW50PiBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG4gICAgQElucHV0KCkgbmFtZTogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgc2Vydm95QXBpOiBTZXJ2b3lBcGk7XHJcbiAgICBASW5wdXQoKSBzZXJ2b3lBdHRyaWJ1dGVzOiB7ICBbcHJvcGVydHk6IHN0cmluZ106IHN0cmluZyB9O1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2VsZW1lbnQnLCB7IHN0YXRpYzogZmFsc2UgfSkgZWxlbWVudFJlZjogRWxlbWVudFJlZjxUPjtcclxuXHJcbiAgICBwcml2YXRlIHZpZXdTdGF0ZUxpc3RlbmVyczogU2V0PElWaWV3U3RhdGVMaXN0ZW5lcj4gPSBuZXcgU2V0KCk7XHJcbiAgICBwcml2YXRlIGNvbXBvbmVudENvbnRyaWJ1dG9yOiBDb21wb25lbnRDb250cmlidXRvcjtcclxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGNoYW5nZXM6IFNpbXBsZUNoYW5nZXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHJlYWRvbmx5IHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByb3RlY3RlZCBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudENvbnRyaWJ1dG9yID0gbmV3IENvbXBvbmVudENvbnRyaWJ1dG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZmluYWwgbWV0aG9kLCBkbyBub3Qgb3ZlcnJpZGVcclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgIHRoaXMuc2Vydm95QXBpLnJlZ2lzdGVyQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZpbmFsIG1ldGhvZCwgZG8gbm90IG92ZXJyaWRlXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQ29tcG9uZW50KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFJlZiAmJiB0aGlzLmNoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zdnlPbkNoYW5nZXModGhpcy5jaGFuZ2VzKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZmluYWwgbWV0aG9kLCBkbyBub3Qgb3ZlcnJpZGVcclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVDb21wb25lbnQoKTtcclxuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudFJlZikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlcyA9IGNoYW5nZXM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5IG9mIE9iamVjdC5rZXlzKGNoYW5nZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VzW3Byb3BlcnR5XSA9IGNoYW5nZXNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN2eU9uQ2hhbmdlcyhjaGFuZ2VzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHkgb2YgT2JqZWN0LmtleXMoY2hhbmdlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZXNbcHJvcGVydHldID0gY2hhbmdlc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN2eU9uQ2hhbmdlcyh0aGlzLmNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VzID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLnNlcnZveUFwaS51blJlZ2lzdGVyQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG91ciBpbml0IGV2ZW50IHRoYXQgaXMgY2FsbGVkIHdoZW4gZG9tIGlzIHJlYWR5XHJcbiAgICBzdnlPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRDb250cmlidXRvci5jb21wb25lbnRDcmVhdGVkKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudmlld1N0YXRlTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIuYWZ0ZXJWaWV3SW5pdCgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvdXIgY2hhbmdlIGV2ZW50IHRoYXQgaXMgY2FsbGVkIHdoZW4gZG9tIGlzIHJlYWR5XHJcbiAgICBzdnlPbkNoYW5nZXMoX2NoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGV0ZWN0Q2hhbmdlcygpIHtcclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogdGhpcyBzaG91bGQgcmV0dXJuIHRoZSBtYWluIG5hdGl2ZSBlbGVtZW50IChsaWtlIHRoZSBmaXJzdCBkaXYpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXROYXRpdmVFbGVtZW50KCk6IFQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWYgPyB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzdWIgY2xhc3NlcyBjYW4gcmV0dXJuIGEgZGlmZmVyZW50IG5hdGl2ZSBjaGlsZCB0aGVuIHRoZSBkZWZhdWx0IG1haW4gZWxlbWVudC5cclxuICAgICAqIHVzZWQgY3VycmVudGx5IG9ubHkgZm9yIGhvcml6b250YWwgYWxpZ21lbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE5hdGl2ZUNoaWxkKCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRSZW5kZXJlcigpOiBSZW5kZXJlcjIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5nZXROYXRpdmVFbGVtZW50KCkucGFyZW50Tm9kZS5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldE5hdGl2ZUVsZW1lbnQoKS5wYXJlbnROb2RlLnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TG9jYXRpb25YKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldE5hdGl2ZUVsZW1lbnQoKS5wYXJlbnROb2RlLnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQpLm9mZnNldExlZnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldExvY2F0aW9uWSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5nZXROYXRpdmVFbGVtZW50KCkucGFyZW50Tm9kZS5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRUb3A7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFZpZXdTdGF0ZUxpc3RlbmVyKGxpc3RlbmVyOiBJVmlld1N0YXRlTGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLnZpZXdTdGF0ZUxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVWaWV3U3RhdGVMaXN0ZW5lcihsaXN0ZW5lcjogSVZpZXdTdGF0ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy52aWV3U3RhdGVMaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQgJiYgdGhpcy5lbGVtZW50UmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnN2eU9uSW5pdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWRkQXR0cmlidXRlcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2Vydm95QXR0cmlidXRlcykgcmV0dXJuO1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMuc2Vydm95QXR0cmlidXRlcykpIHtcclxuICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuZ2V0TmF0aXZlRWxlbWVudCgpLCBrZXksIHRoaXMuc2Vydm95QXR0cmlidXRlc1trZXldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZpZXdTdGF0ZUxpc3RlbmVyIHtcclxuICAgIGFmdGVyVmlld0luaXQoKTogdm9pZDtcclxufVxyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50Q29udHJpYnV0b3Ige1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbGlzdGVuZXJzOiBTZXQ8SUNvbXBvbmVudENvbnRyaWJ1dG9yTGlzdGVuZXI+ID0gbmV3IFNldCgpO1xyXG5cclxuICAgIHB1YmxpYyBjb21wb25lbnRDcmVhdGVkKGNvbXBvbmVudDogU2Vydm95QmFzZUNvbXBvbmVudDxhbnk+KSB7XHJcbiAgICAgICAgQ29tcG9uZW50Q29udHJpYnV0b3IubGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIuY29tcG9uZW50Q3JlYXRlZChjb21wb25lbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQ29tcG9uZW50TGlzdGVuZXIobGlzdGVuZXI6IElDb21wb25lbnRDb250cmlidXRvckxpc3RlbmVyKSB7XHJcbiAgICAgICBDb21wb25lbnRDb250cmlidXRvci5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29tcG9uZW50Q29udHJpYnV0b3JMaXN0ZW5lciB7XHJcblxyXG4gICAgY29tcG9uZW50Q3JlYXRlZChjb21wb25lbnQ6IFNlcnZveUJhc2VDb21wb25lbnQ8YW55Pik6IHZvaWQ7XHJcblxyXG59XHJcbiJdfQ==