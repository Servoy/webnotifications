{"version":3,"file":"servoy-public.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","../../../../projects/servoy-public/src/lib/basecomponent.ts","../../../../projects/servoy-public/src/lib/deferred.ts","../../../../projects/servoy-public/src/lib/jsevent.ts","../../../../projects/servoy-public/src/lib/services/windowref.service.ts","../../../../projects/servoy-public/src/lib/logger.service.ts","../../../../projects/servoy-public/src/lib/servoy_api.ts","../../../../projects/servoy-public/src/lib/tooltip/tooltip.service.ts","../../../../projects/servoy-public/src/lib/tooltip/tooltip.directive.ts","../../../../projects/servoy-public/src/lib/services/servoy_public.service.ts","../../../../projects/servoy-public/src/lib/directives/decimalkeyconverter.directive.ts","../../../../projects/servoy-public/src/lib/format/pipes.ts","../../../../projects/servoy-public/src/lib/format/formatting.service.ts","../../../../projects/servoy-public/src/lib/format/format.pipe.ts","../../../../projects/servoy-public/src/lib/format/emptyvalue.pipe.ts","../../../../projects/servoy-public/src/lib/directives/startedit.directive.ts","../../../../projects/servoy-public/src/lib/directives/imagemediaid.directive.ts","../../../../projects/servoy-public/src/lib/directives/autosave.directive.ts","../../../../projects/servoy-public/src/lib/directives/upload.directive.ts","../../../../projects/servoy-public/src/lib/format/maskformat.ts","../../../../projects/servoy-public/src/lib/format/formatcontrolvalueaccessor.directive.ts","../../../../projects/servoy-public/src/lib/directives/sablotabseq.directive.ts","../../../../projects/servoy-public/src/lib/spectypes.service.ts","../../../../projects/servoy-public/src/lib/servoy_public.module.ts","../../../../projects/servoy-public/src/lib/utils/property_utils.ts","../../../../projects/servoy-public/src/lib/utils/date_utils.ts","../../../../projects/servoy-public/src/lib/testing/publictesting.module.ts","../../../../projects/servoy-public/src/lib/testing/utils.ts","../../../../projects/servoy-public/src/servoy-public.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { OnInit, AfterViewInit, OnChanges, SimpleChanges, Input, Renderer2, ElementRef, ViewChild, Directive, ChangeDetectorRef, OnDestroy, Injectable } from '@angular/core';\r\nimport { ServoyApi } from './servoy_api';\r\n\r\n@Directive()\r\n// eslint-disable-next-line\r\nexport class ServoyBaseComponent<T extends HTMLElement> implements AfterViewInit, OnInit, OnChanges, OnDestroy {\r\n    @Input() name: string;\r\n    @Input() servoyApi: ServoyApi;\r\n    @Input() servoyAttributes: {  [property: string]: string };\r\n\r\n    @ViewChild('element', { static: false }) elementRef: ElementRef<T>;\r\n\r\n    private viewStateListeners: Set<IViewStateListener> = new Set();\r\n    private componentContributor: ComponentContributor;\r\n    private initialized: boolean;\r\n    private changes: SimpleChanges;\r\n\r\n    constructor(protected readonly renderer: Renderer2, protected cdRef: ChangeDetectorRef) {\r\n        this.componentContributor = new ComponentContributor();\r\n    }\r\n\r\n    // final method, do not override\r\n    ngOnInit() {\r\n        this.initializeComponent();\r\n        this.servoyApi.registerComponent(this);\r\n    }\r\n\r\n    // final method, do not override\r\n    ngAfterViewInit() {\r\n        this.initializeComponent();\r\n        if (this.elementRef && this.changes) {\r\n            this.svyOnChanges(this.changes);\r\n            this.changes = null;\r\n        }\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    // final method, do not override\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.initializeComponent();\r\n        if (!this.elementRef) {\r\n            if (this.changes == null) {\r\n                this.changes = changes;\r\n            } else {\r\n                for (const property of Object.keys(changes)) {\r\n                    this.changes[property] = changes[property];\r\n                }\r\n            }\r\n        } else {\r\n            if (this.changes == null) {\r\n                this.svyOnChanges(changes);\r\n            } else {\r\n                for (const property of Object.keys(changes)) {\r\n                    this.changes[property] = changes[property];\r\n                }\r\n                this.svyOnChanges(this.changes);\r\n                this.changes = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.servoyApi.unRegisterComponent(this);\r\n    }\r\n\r\n    // our init event that is called when dom is ready\r\n    svyOnInit() {\r\n        this.addAttributes();\r\n        this.componentContributor.componentCreated(this);\r\n        this.viewStateListeners.forEach(listener => listener.afterViewInit());\r\n    }\r\n\r\n    // our change event that is called when dom is ready\r\n    svyOnChanges(_changes: SimpleChanges) {\r\n    }\r\n\r\n    public detectChanges() {\r\n        this.cdRef.detectChanges();\r\n    }\r\n    /**\r\n     * this should return the main native element (like the first div)\r\n     */\r\n    public getNativeElement(): T {\r\n        return this.elementRef ? this.elementRef.nativeElement : null;\r\n    }\r\n\r\n    /**\r\n     * sub classes can return a different native child then the default main element.\r\n     * used currently only for horizontal aligment\r\n     */\r\n    public getNativeChild(): any {\r\n        return this.elementRef.nativeElement;\r\n    }\r\n\r\n    public getRenderer(): Renderer2 {\r\n        return this.renderer;\r\n    }\r\n\r\n    public getWidth(): number {\r\n        return (this.getNativeElement().parentNode.parentNode as HTMLElement).offsetWidth;\r\n    }\r\n\r\n    public getHeight(): number {\r\n        return (this.getNativeElement().parentNode.parentNode as HTMLElement).offsetHeight;\r\n    }\r\n\r\n    public getLocationX(): number {\r\n        return (this.getNativeElement().parentNode.parentNode as HTMLElement).offsetLeft;\r\n    }\r\n\r\n    public getLocationY(): number {\r\n        return (this.getNativeElement().parentNode.parentNode as HTMLElement).offsetTop;\r\n    }\r\n\r\n    public addViewStateListener(listener: IViewStateListener) {\r\n        this.viewStateListeners.add(listener);\r\n    }\r\n\r\n    public removeViewStateListener(listener: IViewStateListener) {\r\n        this.viewStateListeners.delete(listener);\r\n    }\r\n\r\n    protected initializeComponent() {\r\n        if (!this.initialized && this.elementRef) {\r\n            this.initialized = true;\r\n            this.svyOnInit();\r\n        }\r\n    }\r\n\r\n    protected addAttributes() {\r\n        if (!this.servoyAttributes) return;\r\n        for (const key of Object.keys(this.servoyAttributes)) {\r\n             this.renderer.setAttribute(this.getNativeElement(), key, this.servoyAttributes[key]);\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IViewStateListener {\r\n    afterViewInit(): void;\r\n}\r\n\r\n@Injectable()\r\nexport class ComponentContributor {\r\n    private static listeners: Set<IComponentContributorListener> = new Set();\r\n\r\n    public componentCreated(component: ServoyBaseComponent<any>) {\r\n        ComponentContributor.listeners.forEach(listener => listener.componentCreated(component));\r\n    }\r\n\r\n    public addComponentListener(listener: IComponentContributorListener) {\r\n       ComponentContributor.listeners.add(listener);\r\n    }\r\n}\r\n\r\nexport interface IComponentContributorListener {\r\n\r\n    componentCreated(component: ServoyBaseComponent<any>): void;\r\n\r\n}\r\n","export interface IDeferred<T> {\r\n    readonly promise: Promise<T>;\r\n    reject( reason );\r\n    resolve( value: T );\r\n}\r\n\r\nexport class Deferred <T> implements IDeferred<T> {\r\n    public readonly promise: Promise<T>;\r\n    private _resolve: ( value ) => void;\r\n    private _reject: ( reason ) => void;\r\n    constructor() {\r\n        this.promise = new Promise<T>(( resolve, reject ) => {\r\n            this._reject = reject;\r\n            this._resolve = resolve;\r\n        } );\r\n    }\r\n\r\n    public reject( reason ) {\r\n        this._reject( reason );\r\n    }\r\n\r\n    public resolve( value: T ) {\r\n        this._resolve( value );\r\n    }\r\n}\r\n","export class JSEvent {\r\n    public formName?: string;\r\n    public elementName?: string;\r\n    public svyType: string;\r\n    public eventType: string;\r\n    public modifiers?: number;\r\n    public x?: number;\r\n    public y?: number;\r\n    public timestamp: number;\r\n    public data? : any;\r\n}\r\n\r\nexport interface EventLike {\r\n    target: EventTarget;\r\n    altKey?: boolean;\r\n    shiftKey?: boolean;\r\n    ctrlKey?: boolean;\r\n    metaKey?: boolean;\r\n    pageX? : number;\r\n    pageY? : number;\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nfunction getWindow(): Window {\r\n    return window;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WindowRefService {\r\n    get nativeWindow(): Window {\r\n        return getWindow();\r\n    }\r\n}\n","import { Injectable } from '@angular/core';\r\n\r\nimport { WindowRefService } from './services/windowref.service';\r\n\r\n// log levels for when debugEnabled(true) is called - if that is false, these levels are irrelevant\r\n// any custom debug levels can be used as well - these are just stored here so that custom code can test the level and see if it should log its message\r\nexport enum LogLevel {\r\n    ERROR = 1,\r\n    WARN,\r\n    INFO,\r\n    DEBUG,\r\n    SPAM\r\n}\r\n\r\nexport class LogConfiguration {\r\n    constructor(public isDebugMode: boolean = false, public level: LogLevel= LogLevel.WARN) {\r\n    }\r\n}\r\n\r\ndeclare global {\r\n    // extend the existing window interface with the new log provider property\r\n    interface Window { svyLogConfiguration: LogConfiguration; logFactory: LoggerFactory; logLevels: {[property: string]: LogLevel}; console: Console }\r\n}\r\n\r\nconst noop = (): any => undefined;\r\n\r\nexport class LoggerService {\r\n    private console: Console;\r\n    private enabled = false;\r\n\r\n    constructor(windowRefService: WindowRefService, private svyLogConfiguration: LogConfiguration, private className: string ) {\r\n        this.console = windowRefService.nativeWindow.console;\r\n    }\r\n\r\n    public buildMessage(message: string | ( () => string )) {\r\n        if (this.enabled) {\r\n            return message instanceof Function ? message() : message;\r\n        }\r\n    }\r\n\r\n    get spam() {\r\n        if ( this.svyLogConfiguration.level >= LogLevel.SPAM ) {\r\n            this.enabled = true;\r\n            return this.console.debug.bind(this.console, this.getTime() + ' SPAM ' + this.className + ' - ');\r\n        }\r\n        this.enabled = false;\r\n        return noop;\r\n    }\r\n\r\n    get debug() {\r\n        if ( this.svyLogConfiguration.isDebugMode || this.svyLogConfiguration.level >= LogLevel.DEBUG ) {\r\n            this.enabled = true;\r\n            return this.console.debug.bind(this.console, this.getTime() + ' DEBUG ' + this.className + ' - ');\r\n        }\r\n        this.enabled = false;\r\n        return noop;\r\n    }\r\n\r\n    get info() {\r\n        if ( this.svyLogConfiguration.isDebugMode || this.svyLogConfiguration.level >= LogLevel.INFO ) {\r\n            this.enabled = true;\r\n            return this.console.info.bind(this.console, this.getTime() + ' INFO ' + this.className + ' - ');\r\n        }\r\n        this.enabled = false;\r\n        return noop;\r\n    }\r\n\r\n    get warn() {\r\n        if ( this.svyLogConfiguration.isDebugMode || this.svyLogConfiguration.level >= LogLevel.WARN ) {\r\n            this.enabled = true;\r\n            return this.console.warn.bind(this.console, this.getTime() + ' WARN ' + this.className + ' - ');\r\n        }\r\n        this.enabled = false;\r\n        return noop;\r\n    }\r\n\r\n    get error() {\r\n        if ( this.svyLogConfiguration.isDebugMode || this.svyLogConfiguration.level >= LogLevel.ERROR ) {\r\n            this.enabled = true;\r\n            return this.console.error.bind(this.console, this.getTime() + ' ERROR ' + this.className + ' - ');\r\n        }\r\n        this.enabled = false;\r\n        return noop;\r\n    }\r\n\r\n    public toggleDebugMode() {\r\n        return this.svyLogConfiguration.isDebugMode = !this.svyLogConfiguration.isDebugMode;\r\n    }\r\n\r\n    get logLevel() {\r\n        return this.svyLogConfiguration.level;\r\n    }\r\n\r\n    set logLevel(level: LogLevel) {\r\n        this.svyLogConfiguration.level = level;\r\n    }\r\n\r\n    private getTime(): string {\r\n        const time = new Date();\r\n        return time.getHours() + ':' + time.getMinutes() + ':' + time.getSeconds();\r\n    }\r\n }\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LoggerFactory {\r\n\r\n    private instances: any = {};\r\n    private defaultLogConfiguration: LogConfiguration;\r\n\r\n    constructor(private windowRefService: WindowRefService ) {\r\n        windowRefService.nativeWindow.logFactory = this;\r\n        this.defaultLogConfiguration = windowRefService.nativeWindow.svyLogConfiguration;\r\n        if ( this.defaultLogConfiguration == null ) {\r\n            this.defaultLogConfiguration = new LogConfiguration();\r\n            windowRefService.nativeWindow.svyLogConfiguration = this.defaultLogConfiguration;\r\n            windowRefService.nativeWindow.logLevels = {error: LogLevel.ERROR, debug: LogLevel.DEBUG, info: LogLevel.INFO, warn: LogLevel.WARN, spam: LogLevel.SPAM};\r\n        }\r\n    }\r\n\r\n    public getLogger(cls: any): LoggerService {\r\n        if (this.instances[cls] === undefined) {\r\n            this.instances[cls] = new LoggerService(this.windowRefService, new LogConfiguration(this.defaultLogConfiguration.isDebugMode, this.defaultLogConfiguration.level), cls);\r\n        }\r\n        return this.instances[cls];\r\n    }\r\n}\r\n","import { ServoyBaseComponent } from \"./basecomponent\";\r\n\r\nexport abstract class ServoyApi {\r\n    public abstract formWillShow(formname: string, relationname?: string, formIndex?: number): Promise<boolean>;\r\n    public abstract hideForm(formname: string, relationname?: string, formIndex?: number,\r\n        formNameThatWillShow?: string, relationnameThatWillBeShown?: string, formIndexThatWillBeShown?: number): Promise<boolean>;\r\n\r\n    public abstract startEdit(propertyName: string);\r\n\r\n    public abstract apply(propertyName: string, value: any);\r\n\r\n    public abstract callServerSideApi(methodName: string, args: Array<any>);\r\n\r\n    public abstract getFormComponentElements(_propertyName: string, _formComponentValue: any);\r\n\r\n    public abstract isInDesigner(): boolean;\r\n\r\n    public abstract trustAsHtml(): boolean;\r\n\r\n    public abstract isInAbsoluteLayout(): boolean;\r\n    public abstract getMarkupId(): string;\r\n\r\n    public abstract getFormName(): string;\r\n\r\n    public abstract registerComponent(component: ServoyBaseComponent<any>);\r\n\r\n    public abstract unRegisterComponent(component: ServoyBaseComponent<any>);\r\n\r\n    public abstract getClientProperty(key);\r\n}\r\n","import { DOCUMENT } from '@angular/common';\r\nimport { Inject, Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { WindowRefService } from '../services/windowref.service';\r\n\n@Injectable()\nexport class TooltipService {\n    isTooltipActive: Subject<boolean>;\n    tipInitialTimeout: any;\n    tipTimeout: any;\n    private tooltipDiv: HTMLDivElement;\n    private tipmousemouveEventX: any;\n    private tipmousemouveEventY: any;\n    private tipmousemouveEventIsPage: boolean;\r\n    private doc: Document;\n    constructor(@Inject(DOCUMENT) _doc: any, private windowRefService: WindowRefService) {\n        this.isTooltipActive = new Subject<boolean>();\r\n        this.doc = _doc;\n    }\n\r\n\r\n    public showTooltip(event: MouseEvent, message: string, initialDelay: number, dismissDelay: number) {\r\n        let e = event;\r\n        if (!e) e = this.windowRefService.nativeWindow.event as MouseEvent;\r\n\r\n        let targ;\r\n        if (e.target) targ = e.target;\r\n        else if (e.srcElement) targ = e.srcElement;\r\n        if (targ.nodeType === 3) // defeat Safari bug\r\n            targ = targ.parentNode;\r\n\r\n        if (targ.tagName && targ.tagName.toLowerCase() === 'option') { // stop tooltip if over option element\r\n            this.hideTooltip();\r\n            return;\r\n        }\r\n\r\n        const tDiv = this.getTooltipDiv();\r\n        tDiv.innerHTML = message;\r\n        tDiv.style.zIndex = '1600';\r\n        tDiv.style.width = '';\r\n        tDiv.style.overflow = 'hidden';\r\n\r\n        this.tipmousemove(e);\r\n        if (this.doc.addEventListener) {\r\n            this.doc.addEventListener('mousemove', this.tipmousemove, false);\r\n        }\r\n        this.tipInitialTimeout = setTimeout(() => this.adjustAndShowTooltip(dismissDelay), initialDelay);\r\n    }\r\n\r\n    public hideTooltip() {\r\n        this.internalHideTooltip();\r\n    }\r\n\n    private getTooltipDiv(): HTMLDivElement {\n        if (!this.tooltipDiv) {\n            this.tooltipDiv = this.doc.createElement('div');\n            this.tooltipDiv.id = 'mktipmsg';\n            this.tooltipDiv.className = 'mktipmsg tooltip-inner'; // tooltip-inner class is also used by ui-bootstrap-tpls-0.10.0\n            this.doc.getElementsByTagName('body')[0].appendChild(this.tooltipDiv);\n        }\n        return this.tooltipDiv;\n    }\n\n    private tipmousemove = (e: MouseEvent) => {\n        if (e.pageX || e.pageY) {\n            this.tipmousemouveEventIsPage = true;\n            this.tipmousemouveEventX = e.pageX;\n            this.tipmousemouveEventY = e.pageY;\n        } else if (e.clientX || e.clientY) {\n            this.tipmousemouveEventIsPage = false;\n            this.tipmousemouveEventX = e.clientX;\n            this.tipmousemouveEventY = e.clientY;\n        }\n    };\n\n    private adjustAndShowTooltip(dismissDelay: number) {\n        let x = 0;\n        let y = 0;\n\n        if (this.tipmousemouveEventX || this.tipmousemouveEventY) {\n            if (this.tipmousemouveEventIsPage) {\n                x = this.tipmousemouveEventX;\n                y = this.tipmousemouveEventY;\n            } else {\n                x = this.tipmousemouveEventX + this.doc.body.scrollLeft + this.doc.documentElement.scrollLeft;\n                y = this.tipmousemouveEventY + this.doc.body.scrollTop + this.doc.documentElement.scrollTop;\n            }\n        }\n\n        let wWidth = 0; let wHeight = 0;\n        if (typeof ( this.windowRefService.nativeWindow.innerWidth) == 'number') {\n            //Non-IE\n            wWidth =  this.windowRefService.nativeWindow.innerWidth;\n            wHeight =  this.windowRefService.nativeWindow.innerHeight;\n        } else if (this.doc.documentElement && (this.doc.documentElement.clientWidth || this.doc.documentElement.clientHeight)) {\n            //IE 6+ in 'standards compliant mode'\n            wWidth = this.doc.documentElement.clientWidth;\n            wHeight = this.doc.documentElement.clientHeight;\n        }\n\n\n        const tDiv = this.getTooltipDiv();\n        tDiv.style.left = x + 10 + 'px';\n        tDiv.style.top = y + 10 + 'px';\n        tDiv.style.display = 'block';\n        const tooltipOffsetWidth = x + 10 + tDiv.offsetWidth;\n\n        if (wWidth < tooltipOffsetWidth) {\n            let newLeft = x - 10 - tDiv.offsetWidth;\n            if (newLeft < 0) {\n                newLeft = 0;\n                tDiv.style.width = x - 10 + 'px';\n            }\n            if (newLeft === 0)\n                newLeft = tDiv.offsetWidth;\n            tDiv.style.left = newLeft + 'px';\n        }\n\n        const tooltipOffsetHeight = y + 10 + tDiv.offsetHeight;\n        if (wHeight < tooltipOffsetHeight) {\n            const newTop = y - 10 - tDiv.offsetHeight;\n            tDiv.style.top = newTop + 'px';\n        }\n        this.isTooltipActive.next(true);\n        this.tipTimeout = setTimeout(() => this.hideTooltip(), dismissDelay);\n\n\n    }\n\r\n    private internalHideTooltip() {\r\n        if (this.doc.removeEventListener)\r\n           this.doc.removeEventListener('mousemove', this.tipmousemove, false);\r\n        clearTimeout(this.tipInitialTimeout);\r\n        clearTimeout(this.tipTimeout);\r\n\r\n        const tDiv = this.getTooltipDiv();\r\n        tDiv.style.display = 'none';\r\n        this.isTooltipActive.next(false);\r\n    }\n}\n\n\n\n\n\n","import {Directive, HostListener, Input, OnDestroy} from '@angular/core';\nimport {TooltipService} from './tooltip.service';\n\n@Directive({ selector: '[svyTooltip]' })\nexport class TooltipDirective implements OnDestroy {\n\n  @Input('svyTooltip') tooltipText: string;\n  isActive = false;\n\n  constructor(private tooltipService: TooltipService){\n    this.tooltipService.isTooltipActive.subscribe(a => {\n      this.isActive = a;\n    });\n  }\n\n  @HostListener('mouseenter')\n  onMouseEnter(event): void {\n    if(this.tooltipText)\n        this.tooltipService.showTooltip(event, this.tooltipText, 750, 5000);\n  }\n\n  @HostListener('mouseleave')\n  onMouseLeave(): void {\n    this.tooltipService.hideTooltip();\n  }\n\n  @HostListener('click')\n  onClick(): void {\n    this.tooltipService.hideTooltip();\n  }\n\n  @HostListener('contextmenu')\n  onContextMenu(): void {\n    this.tooltipService.hideTooltip();\n  }\n\n  ngOnDestroy(): void {\n    this.tooltipService.hideTooltip();\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { EventLike, JSEvent } from '../jsevent';\r\n\r\n@Injectable()\r\nexport abstract class ServoyPublicService {\r\n    public abstract showFileOpenDialog(title: string, multiselect: boolean, acceptFilter: string, url: string): void;\r\n    public abstract createJSEvent(event: EventLike, eventType: string, contextFilter?: string, contextFilterElement?: any): JSEvent;\r\n    public abstract getLocale(): string;\r\n    public abstract callService<T>(serviceName: string, methodName: string, argsObject: any, async?: boolean): Promise<T>;\r\n    public abstract getI18NMessages(...keys: string[]): Promise<any>;\r\n    public abstract executeInlineScript<T>(formname: string, script: string, params: any[]): Promise<T>;\r\n    public abstract generateUploadUrl(formname: string, componentName: string, propertyName: string): string;\r\n    public abstract generateServiceUploadUrl(serviceName: string, apiFunctionName: string): string;\r\n    public abstract getFormCacheByName(containedForm: string): IFormCache;\r\n}\r\n\r\nexport interface IFormCache {\r\n    absolute: boolean;\r\n    size: {width: number; height: number};\r\n    getComponent(name: string): IComponentCache;\r\n}\r\n\r\nexport interface IComponentCache {\r\n    name: string;\r\n    model: { [property: string]: any };\r\n}\r\n","import { Directive , Input , ElementRef, HostListener} from '@angular/core';\nimport { getLocaleNumberSymbol, NumberSymbol } from '@angular/common';\nimport { ServoyPublicService } from '../services/servoy_public.service';\nimport { Format } from '../format/formatting.service';\n\n@Directive({\n  selector: '[svyDecimalKeyConverter]'\n})\nexport class DecimalkeyconverterDirective {\n\n  @Input('svyDecimalKeyConverter') svyFormat: Format;\n  private element: HTMLInputElement;\n\n  public constructor(private el: ElementRef, private servoyService: ServoyPublicService) {\n      this.element = el.nativeElement;\n  }\n\n  @HostListener('keydown', ['$event']) onKeypress(e: KeyboardEvent) {\n      if (e.which === 110 && this.svyFormat && this.svyFormat.type === 'NUMBER') {\n          const caretPos = this.element.selectionStart;\n          const startString = this.element.value.slice(0, caretPos);\n          const endString = this.element.value.slice(this.element.selectionEnd, this.element.value.length);\n          this.element.value = (startString + getLocaleNumberSymbol(this.servoyService.getLocale(), NumberSymbol.Decimal) + endString);\n          this.element.focus();\n          this.element.setSelectionRange(caretPos + 1, caretPos + 1);\n          if (e.preventDefault) e.preventDefault();\n      }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport {PropertyUtils} from '../utils/property_utils';\r\n\r\n@Pipe( { name: 'mnemonicletterFilter' } )\r\nexport class MnemonicletterFilterPipe implements PipeTransform {\r\n    transform( input: string, letter: string): string{\r\n        if(letter && input) return input.replace(letter, '<u>'+letter+'</u>');\r\n        return input;\r\n    }\r\n}\r\n@Pipe({name: 'notNullOrEmpty'})\r\nexport class NotNullOrEmptyPipe implements PipeTransform {\r\n  transform(value: any[], _args?: any): any {\r\n      if(value)\r\n        return value.filter(a => a && (a.realValue ||a.displayValue));\r\n      return value;\r\n  }\r\n}\r\n\r\n@Pipe( { name: 'htmlFilter' } )\r\nexport class HtmlFilterPipe implements PipeTransform {\r\n    transform( input: string): string{\r\n      if (input && input.indexOf && input.indexOf('<body') >=0 && input.lastIndexOf('</body') >=0) {\r\n        input = input.substring(input.indexOf('<body')+6,input.lastIndexOf('</body'));\r\n      }\r\n      return input;\r\n    }\r\n}\n\r\n@Pipe( { name: 'trustAsHtml' } )\r\nexport class TrustAsHtmlPipe implements PipeTransform {\r\n    constructor( private domSanitizer: DomSanitizer ) {\r\n    }\r\n\r\n    transform( input: string, trustAsHtml: boolean ): any {\r\n        if ( trustAsHtml ) {\r\n            return this.domSanitizer.bypassSecurityTrustHtml(input);\r\n        }\r\n        return input;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport numbro from 'numbro';\r\nimport { DateTime } from 'luxon';\r\nimport { ServoyPublicService } from '../services/servoy_public.service';\r\n\r\nconst MILLSIGN = '\\u2030';\r\n\r\nexport class Format {\r\n    display: string = null;\r\n    uppercase = false;\r\n    lowercase = false;\r\n    type: string = null;\r\n    isMask = false;\r\n    isRaw = false;\r\n    isNumberValidator = false;\r\n    edit: string = null;\r\n    placeHolder = '';\r\n    percent = '';\r\n    allowedCharacters = '';\r\n    maxLength = 0;\r\n}\r\n\r\n\r\n@Injectable()\r\nexport class FormattingService {\r\n\r\n    constructor(private servoyService: ServoyPublicService) {\r\n    }\r\n\r\n    // formatting stufff\r\n    public format(data: any, format: Format, useEditFormat: boolean): string {\r\n        const formatString = useEditFormat ? format.edit : format.display;\r\n\r\n        if ((!format) || (!format.type) || ((typeof data === 'number') && isNaN(data))) {\r\n            if (!format && ((format.type === 'NUMBER') || (format.type === 'INTEGER')) && (typeof data === 'number') && !isNaN(data)) {\r\n                // make sure is always returned with correct type, otherwise compare will not work well\r\n                return data.toString();\r\n            }\r\n            return data;\r\n        }\r\n        if (data === undefined || data === null) return '';\r\n        if ((format.type === 'NUMBER') || (format.type === 'INTEGER')) {\r\n            return this.formatNumbers(data, formatString);\r\n        } else if (format.type === 'TEXT') {\r\n            let formattedValue = this.formatText(data, formatString);\r\n            if (format.uppercase) formattedValue = formattedValue.toUpperCase();\r\n            else if (format.lowercase) formattedValue = formattedValue.toLowerCase();\r\n            return formattedValue;\r\n        } else if (format.type === 'DATETIME') {\r\n            return this.formatDate(data, formatString);\r\n        }\r\n        return data;\r\n    }\r\n\r\n    public testKeyPressed(event: KeyboardEvent, keyCode: number) {\r\n        let code: number;\r\n\r\n        if (!event) event = window.event as KeyboardEvent;\r\n        if (!event) return false;\r\n        if (event.keyCode) code = event.keyCode;\r\n        else if (event.which) code = event.which;\r\n        return code === keyCode;\r\n    }\r\n\r\n    // test numbers only\r\n    public testForNumbersOnly(e, keyChar, vElement, vFindMode, vCheckNumbers, vSvyFormat, skipMaxLength) {\r\n        if (!vFindMode && vCheckNumbers) {\r\n            if (this.testKeyPressed(e, 13) && e.target.tagName.toUpperCase() === 'INPUT') {\r\n                //do not looses focus, just apply the format and push value\r\n                vElement.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { text: () => vElement.value } }));\r\n            } else if (vSvyFormat.type === 'INTEGER') {\r\n                const currentLanguageNumeralSymbols = numbro.languageData();\r\n\r\n                if (keyChar === undefined || keyChar === null) {\r\n                    return this.numbersonly(e, false, currentLanguageNumeralSymbols.delimiters.decimal, currentLanguageNumeralSymbols.delimiters.thousands, currentLanguageNumeralSymbols.currency\r\n                        .symbol,\r\n                        vSvyFormat.percent, vElement, skipMaxLength === true ? 0 : vSvyFormat.maxLength);\r\n                } else {\r\n                    return this.numbersonlyForChar(keyChar, false, currentLanguageNumeralSymbols.delimiters.decimal, currentLanguageNumeralSymbols.delimiters.thousands,\r\n                        currentLanguageNumeralSymbols.currency.symbol, vSvyFormat.percent, vElement, skipMaxLength === true ? 0 : vSvyFormat.maxLength);\r\n                }\r\n            } else if (vSvyFormat.type === 'NUMBER' || ((vSvyFormat.type === 'TEXT') && vSvyFormat.isNumberValidator)) {\r\n                const currentLanguageNumeralSymbols = numbro.languageData();\r\n\r\n                if (keyChar === undefined || keyChar === null) {\r\n                    return this.numbersonly(e, true, currentLanguageNumeralSymbols.delimiters.decimal, currentLanguageNumeralSymbols.delimiters.thousands,\r\n                        currentLanguageNumeralSymbols.currency.symbol, vSvyFormat.percent, vElement, skipMaxLength === true ? 0 : vSvyFormat.maxLength);\r\n                } else {\r\n                    return this.numbersonlyForChar(keyChar, true, currentLanguageNumeralSymbols.delimiters.decimal, currentLanguageNumeralSymbols.delimiters.thousands,\r\n                        currentLanguageNumeralSymbols.currency.symbol, vSvyFormat.percent, vElement, skipMaxLength === true ? 0 : vSvyFormat.maxLength);\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // unformatting stuff\r\n\r\n    public unformat(data: any, servoyFormat: string, type: string, currentValue?: any) {\r\n        if ((!servoyFormat) || (!type) || (!data && data !== 0)) return data;\r\n        if ((type === 'NUMBER') || (type === 'INTEGER')) {\r\n            return this.unformatNumbers(data, servoyFormat);\r\n        } else if (type === 'TEXT') {\r\n            return data;\r\n        } else if (type === 'DATETIME') {\r\n            if ('' === data) return null;\r\n           servoyFormat = this.convertFormat(servoyFormat);\r\n            const d = DateTime.fromFormat(data, servoyFormat, {locale: this.servoyService.getLocale()}).toJSDate();\r\n            // if format has not year/month/day use the one from the current model value\r\n            // because luxon will just use current date\r\n            if (currentValue && !isNaN(currentValue.getTime())) {\r\n                if (servoyFormat.indexOf('y') === -1) {\r\n                    d.setFullYear(currentValue.getFullYear());\r\n                }\r\n                if (servoyFormat.indexOf('W') === -1 && servoyFormat.indexOf('o') === -1) {\r\n                    if (servoyFormat.indexOf('M') === -1) {\r\n                        d.setMonth(currentValue.getMonth());\r\n                    }\r\n                    if (servoyFormat.indexOf('d') === -1) {\r\n                        d.setDate(currentValue.getDate());\r\n                    }\r\n                }\r\n            }\r\n            return d;\r\n        }\r\n        return data;\r\n    }\r\n\r\n    private unformatNumbers(data: any, format: string) { // todo throw error when not coresponding to format (reimplement with state machine)\r\n        if (data === '') return data;\r\n        //treat scientiffic numbers\r\n        if (data.toString().toLowerCase().indexOf('e') > -1 && !isNaN(data)) {\r\n            return new Number(data).valueOf();\r\n        }\r\n\r\n        let multFactor = 1;\r\n        const MILLSIGN = '\\u2030';\r\n        if (format.indexOf(MILLSIGN) > -1 && format.indexOf('\\'' + MILLSIGN + '\\'') == -1) {\r\n            multFactor *= 0.001;\r\n        }\r\n        if (format.indexOf('\\'') > -1) {\r\n            // replace the literals\r\n            const parts = format.split('\\'');\r\n            for (let i = 0; i < parts.length; i++) {\r\n                if (i % 2 === 1) {\r\n                    data = data.replace(new RegExp(parts[i], 'g'), '');\r\n                }\r\n            }\r\n        }\r\n        let ret = numbro(data).value();\r\n        ret *= multFactor;\r\n        return ret;\r\n    }\r\n\r\n    private numbersonly(e, decimal, decimalChar, groupingChar, currencyChar, percentChar, vElement, mlength) {\r\n        let key;\r\n\r\n        if (window.event) {\r\n            key = window.event['keyCode'];\r\n        } else if (e) {\r\n            key = e.which;\r\n        } else {\r\n            return true;\r\n        }\r\n\r\n        if ((key == null) || (key === 0) || (key === 8) || (key === 9) || (key === 13) || (key === 27) || (e.ctrlKey && key === 97) || (e.ctrlKey && key === 99) ||\r\n            (e.ctrlKey && key === 118) || (e.ctrlKey && key === 120)) { //added CTRL-A, X, C and V\r\n            return true;\r\n        }\r\n\r\n        const keychar = String.fromCharCode(key);\r\n        return this.numbersonlyForChar(keychar, decimal, decimalChar, groupingChar, currencyChar, percentChar, vElement, mlength);\r\n\r\n    }\r\n\r\n    private numbersonlyForChar(keychar, decimal, decimalChar, groupingChar, currencyChar, percentChar, vElement, mlength) {\r\n        const value = vElement.value;\r\n        if (mlength > 0 && value) {\r\n            let counter = 0;\r\n            if (('0123456789').indexOf(keychar) !== -1) counter++;\r\n            const stringLength = value.length;\r\n            for (let i = 0; i < stringLength; i++) {\r\n                if (('0123456789').indexOf(value.charAt(i)) !== -1) counter++;\r\n            }\r\n            const selectedTxt = this.getSelectedText(vElement);\r\n            if (selectedTxt) {\r\n                // selection will get deleted/replaced by typed key\r\n                for (let i = 0; i < selectedTxt.length; i++) {\r\n                    if (('0123456789').indexOf(selectedTxt.charAt(i)) !== -1) counter--;\r\n                }\r\n            }\r\n            if (counter > mlength) return false;\r\n        }\r\n\r\n        if ((('-0123456789').indexOf(keychar) > -1)) {\r\n            return true;\r\n        } else if (decimal && (keychar === decimalChar)) {\r\n            return true;\r\n        } else if (keychar === groupingChar) {\r\n            return true;\r\n        } else if (keychar === currencyChar) {\r\n            return true;\r\n        } else if (keychar === percentChar) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private getSelectedText(textarea) {\r\n        let sel = null;\r\n        if (textarea) {\r\n            const start = textarea['selectionStart'];\r\n            const end = textarea['selectionEnd'];\r\n            sel = textarea['value'].substring(start, end);\r\n        }\r\n        return sel;\r\n    }\r\n\r\n    private formatNumbers(data, servoyFormat: string): string {\r\n        if (!servoyFormat)\r\n            return data;\r\n        if (data === '')\r\n            return data;\r\n\r\n        data = Number(data); // just to make sure that if it was a string representing a number we turn it into a number\r\n        if (typeof data === 'number' && isNaN(data)) return ''; // cannot format something that is not a number\r\n\r\n        const initialData = data;\r\n        let patchedFormat = servoyFormat; // patched format for numeraljs format\r\n        let i; let j;\r\n        let prefix = '';\r\n        let sufix = '';\r\n\r\n\r\n        if (patchedFormat.indexOf(';') > 0) {\r\n            if (data < 0) {\r\n                patchedFormat = patchedFormat.split(';')[1];\r\n            } else patchedFormat = patchedFormat.split(';')[0];\r\n        }\r\n\r\n        if (data < 0) data *= -1;\r\n        if (patchedFormat.indexOf('\\u00A4') >= 0) {\r\n            patchedFormat = patchedFormat.replace(new RegExp('\\u00A4', 'g'), numbro.languageData().currency.symbol);\r\n        }\r\n        if (servoyFormat.indexOf('-') >= 0 && initialData >= 0 && servoyFormat.indexOf(';') < 0) {\r\n            patchedFormat = patchedFormat.replace(new RegExp('-', 'g'), '');\r\n        }\r\n\r\n        if (patchedFormat.indexOf('%') > -1 && patchedFormat.indexOf('\\'%\\'') === -1) {\r\n            data *= 100;\r\n        } else if (patchedFormat.indexOf(MILLSIGN) > -1 && patchedFormat.indexOf('\\'' + MILLSIGN + '\\'') === -1) {\r\n            data *= 1000;\r\n        }\r\n        let numberStart = patchedFormat.length;\r\n        let index = patchedFormat.indexOf('0');\r\n        if (index >= 0) {\r\n            numberStart = index;\r\n        }\r\n        index = patchedFormat.indexOf('#');\r\n        if (index >= 0 && index < numberStart) {\r\n            numberStart = index;\r\n        }\r\n        let numberEnd = 0;\r\n        index = patchedFormat.lastIndexOf('0');\r\n        if (index >= 0) {\r\n            numberEnd = index;\r\n        }\r\n        index = patchedFormat.lastIndexOf('#');\r\n        if (index >= 0 && index > numberEnd) {\r\n            numberEnd = index;\r\n        }\r\n\r\n        if (numberStart > 0) {\r\n            prefix = patchedFormat.substring(0, numberStart);\r\n        }\r\n\r\n        if (numberEnd < patchedFormat.length - 1) {\r\n            sufix = patchedFormat.substring(numberEnd + 1);\r\n        }\r\n\r\n        patchedFormat = patchedFormat.substring(numberStart, numberEnd + 1);\r\n        let ret;\r\n\r\n\r\n        prefix = prefix.replace(new RegExp('\\'', 'g'), '');\r\n        sufix = sufix.replace(new RegExp('\\'', 'g'), '');\r\n\r\n        if (servoyFormat.indexOf('-') === -1 && initialData < 0 && servoyFormat.indexOf(';') < 0) {\r\n            prefix = prefix + '-';\r\n        }\r\n        // scientific notation case\r\n        if (servoyFormat.indexOf('E') > -1) {\r\n            const frmt = /([0#.,]+)+E0+.*/.exec(patchedFormat)[1];\r\n            let integerDigits = 0;\r\n            let fractionalDigits = 0;\r\n            let countIntegerState = true;\r\n            for (i = 0; i < frmt.length; i++) {\r\n                const chr = frmt[i];\r\n                if (chr === '.') {\r\n                    countIntegerState = false;\r\n                    continue;\r\n                }\r\n                if (chr === ',') continue;\r\n                if (countIntegerState) {\r\n                    integerDigits++;\r\n                } else {\r\n                    fractionalDigits++;\r\n                }\r\n            }\r\n            ret = Number(data).toExponential(integerDigits + fractionalDigits);\r\n        } else {\r\n            // get min digits\r\n            let minLen = 0;\r\n            let optionalDigits = 0;\r\n            for (i = 0; i < patchedFormat.length; i++) {\r\n                if (patchedFormat[i] === '0') {\r\n                    minLen++;\r\n                } else if (patchedFormat[i] === '#' && minLen === 0) {\r\n                    optionalDigits++;\r\n                } else if (patchedFormat[i] === '.') {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            patchedFormat = patchedFormat.replace(new RegExp('(#+)', 'g'), '[$1]');\r\n            patchedFormat = patchedFormat.replace(new RegExp('#', 'g'), '0');\r\n\r\n            ret = numbro(data).format(patchedFormat);\r\n\r\n            // set min digits\r\n            if (minLen > 0) {\r\n                const retSplit = ret.split(numbro.languageData().delimiters.decimal);\r\n                for (i = 0; i < retSplit[0].length; i++) {\r\n                    if (retSplit[0][i] < '0' || retSplit[0][i] > '9') continue;\r\n                    for (j = i; j < retSplit[0].length; j++) {\r\n                        if (retSplit[0][j] >= '0' && retSplit[0][j] <= '9') continue;\r\n                        break;\r\n                    }\r\n                    const nrMissing0 = minLen - (j - i);\r\n                    if (nrMissing0 > 0) {\r\n                        ret = retSplit[0].substring(0, i);\r\n                        for (j = 0; j < nrMissing0; j++) ret += '0';\r\n                        ret += retSplit[0].substring(i);\r\n                        if (retSplit.length > 1) ret += (numbro.languageData().delimiters.decimal + retSplit[1]);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            // fix the optional digits\r\n            if (patchedFormat.indexOf(',') === -1 && optionalDigits > 0) {\r\n                let toEliminate = 0;\r\n                for (i = 0; i < ret.length; i++) {\r\n                    if (ret.charAt(i) === '0') {\r\n                        toEliminate++;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n                if (toEliminate > 0) {\r\n                    if (toEliminate > optionalDigits) {\r\n                        toEliminate = optionalDigits;\r\n                    }\r\n                    ret = ret.substring(toEliminate);\r\n                    if (ret.indexOf(numbro.languageData().delimiters.decimal) === 0) {\r\n                        // we eliminated too much\r\n                        ret = '0' + ret;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return prefix + ret + sufix;\r\n    }\r\n\r\n    private formatText(data, servoyFormat: string): string {\r\n        if (!servoyFormat) return data;\r\n        const error = 'input string not corresponding to format : ' + data + ' , ' + servoyFormat;\r\n        let ret = '';\r\n        let isEscaping = false;\r\n        let offset = 0;\r\n        if (data && typeof data === 'number') {\r\n            data = data.toString();\r\n        }\r\n        for (let i = 0; i < servoyFormat.length; i++) {\r\n            const formatChar = servoyFormat[i];\r\n            const dataChar = data[i - offset];\r\n            if (dataChar === undefined) break;\r\n            if (isEscaping && formatChar !== '\\'') {\r\n                if (dataChar !== formatChar) throw error;\r\n                ret += dataChar;\r\n                continue;\r\n            }\r\n            switch (formatChar) {\r\n                case '\\'':\r\n                    isEscaping = !isEscaping;\r\n                    offset++;\r\n                    break;\r\n                case 'U':\r\n                    if (dataChar.match(/[a-zA-Z\\u00C0-\\u00ff]/) == null) throw error;\r\n                    ret += dataChar.toUpperCase();\r\n                    break;\r\n                case 'L':\r\n                    if (dataChar.match(/[a-zA-Z\\u00C0-\\u00ff]/) == null) throw error;\r\n                    ret += dataChar.toLowerCase();\r\n                    break;\r\n                case 'A':\r\n                    if (dataChar.match(/[0-9a-zA-Z\\u00C0-\\u00ff]/) == null) throw error;\r\n                    ret += dataChar;\r\n                    break;\r\n                case '?':\r\n                    if (dataChar.match(/[a-zA-Z\\u00C0-\\u00ff]/) == null) throw error;\r\n                    ret += dataChar;\r\n                    break;\r\n                case '*':\r\n                    ret += dataChar;\r\n                    break;\r\n                case 'H':\r\n                    if (dataChar.match(/[0-9a-fA-F]/) == null) throw error;\r\n                    ret += dataChar.toUpperCase();\r\n                    break;\r\n                case '#':\r\n                    if (dataChar.match(/[\\d]/) == null) throw error;\r\n                    ret += dataChar;\r\n                    break;\r\n                default:\r\n                    ret += formatChar;\r\n                    if (formatChar !== dataChar) offset++;\r\n                    break;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    private formatDate(data, dateFormat: string): string {\r\n        if (!(data instanceof Date)) return data;\r\n        dateFormat = this.convertFormat(dateFormat);\r\n        const formatted  = DateTime.fromJSDate(data).setLocale(this.servoyService.getLocale()).toFormat(dateFormat);\r\n        return formatted.trim ? formatted.trim() : formatted;\r\n    }\r\n\r\n    private convertFormat(dateFormat: string): string {\r\n        if (!dateFormat) dateFormat = 'F'; // long date format of luxon\r\n        // adjust to luxon js formatting (from java simple date format)\r\n        dateFormat = dateFormat.replace(new RegExp('Y', 'g'), 'y');\r\n        dateFormat = dateFormat.replace(new RegExp('aa', 'g'), 'a');\r\n        dateFormat = dateFormat.replace(new RegExp('E', 'g'), 'EEE');\r\n        dateFormat = dateFormat.replace(new RegExp('u', 'g'), 'E');\r\n        dateFormat = dateFormat.replace(new RegExp('w', 'g'), 'W');\r\n        // no equivalent for K, just put h for now\r\n        dateFormat = dateFormat.replace(new RegExp('K','g'), 'h');\r\n        dateFormat = dateFormat.replace(new RegExp('k','g'), 'H');\r\n        dateFormat = dateFormat.replace(new RegExp('D','g'), 'o');\r\n        // if week is found then the year must be 'k' for luxon (iso week year)\r\n        if (dateFormat.indexOf('W') !== -1) {\r\n            dateFormat = dateFormat.replace(new RegExp('y', 'g'), 'k');\r\n        }\r\n        return dateFormat;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform} from '@angular/core';\r\nimport { Format, FormattingService } from './formatting.service';\r\n\r\n@Pipe( { name: 'formatFilter'} )\r\nexport class FormatFilterPipe implements PipeTransform {\r\n\r\n    public constructor(private formatService: FormattingService) {\r\n    }\r\n\r\n    transform( input: any, format: Format): any {\r\n        if (!format) return input;\r\n        return this.formatService.format(input, format, !format.display);\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe( { name: 'emptyValue'} )\r\nexport class EmptyValueFilterPipe implements PipeTransform {\r\n\r\n    transform( input: any): any {\r\n        // eslint-disable-next-line eqeqeq\r\n        if (input == '') return '\\u00A0';\r\n        return input;\r\n    }\r\n}\r\n","import { Directive , Input , HostListener} from '@angular/core';\nimport {LoggerService, LoggerFactory} from '../logger.service';\nimport { ServoyBaseComponent } from '../basecomponent';\n\n@Directive({\n  selector: '[svyStartEdit]'\n})\nexport class StartEditDirective {\n\n  @Input('svyStartEdit') dataProviderID: string;\n  @Input() hostComponent: ServoyBaseComponent<HTMLElement>;\n\n  private log: LoggerService;\n\n  public constructor(logFactory: LoggerFactory) {\n    this.log = logFactory.getLogger('StartEditDirective');\n  }\n\n  @HostListener('focus', ['$event']) onFocus(e: FocusEvent) {\n    if (!this.hostComponent) {\n      this.log.error('host component not found for the start edit directive use [hostComponent]=\"self\" besides this in the template (component must be extending ServoyBaseComponent)');\n    } else if (this.hostComponent.servoyApi && this.dataProviderID !== undefined) {\n      this.hostComponent.servoyApi.startEdit(this.dataProviderID);\n    } else {\n      this.log.error('Can\\'t call startEdit, missing servoyApi and dataProviderID for field ' + this.hostComponent);\n    }\n  }\n}\n","import { Directive, Input, SimpleChanges, OnChanges, ElementRef, Renderer2, OnDestroy } from '@angular/core';\nimport { ServoyBaseComponent } from '../basecomponent';\nimport { IViewStateListener } from '../basecomponent';\n\n@Directive({\n    selector: '[svyImageMediaId]'\n})\nexport class ImageMediaIdDirective implements OnChanges, IViewStateListener, OnDestroy {\n\n    @Input('svyImageMediaId') media: any;\n    @Input() hostComponent: ServoyBaseComponent<HTMLElement>;\n\n    private imgStyle: Map<string, any>;\n    private rollOverImgStyle: Map<string, any>;\n    private clearStyle: Map<string, any>;\n\n    public constructor(private _elemRef: ElementRef<HTMLElement>, private _renderer: Renderer2) {\n        this.clearStyle = new Map();\n        this.clearStyle.set('width', '0px');\n        this.clearStyle.set('height', '0px');\n        this.clearStyle.set('backgroundImage', '');\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes['hostComponent']) {\n            this.hostComponent.addViewStateListener(this);\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.hostComponent) {\n            this.hostComponent.removeViewStateListener(this);\n        }\n    }\n\n    afterViewInit() {\n        const nativeElement = this.hostComponent.getNativeElement();\n        const renderer = this.hostComponent.getRenderer();\n        renderer.listen(nativeElement, 'mouseenter', (e) => {\n            if (this.rollOverImgStyle) {\n                this.setCSSStyle(this.rollOverImgStyle);\n            }\n        });\n\n        renderer.listen(nativeElement, 'mouseleave', (e) => {\n            if (this.rollOverImgStyle) {\n                if (this.imgStyle) {\n                    this.setCSSStyle(this.imgStyle);\n                } else {\n                    this.setCSSStyle(this.clearStyle);\n                }\n            }\n        });\n        this.setImageStyle();\n    }\n\n    private setImageStyle(): void {\n        if (this.media && (this.media.img || this.media.rollOverImg) || this.rollOverImgStyle || this.imgStyle) {\n            const componentSize = {\r\n                width: (this._elemRef.nativeElement.parentNode.parentNode as HTMLElement).clientWidth,\n                height: (this._elemRef.nativeElement.parentNode.parentNode as HTMLElement).clientHeight\r\n            };\n            if (componentSize.height === 0 || componentSize.width === 0)\n                setTimeout(() => this.setImageStyle(), 100);\n            else {\n                const mediaOptions = this.media.mediaOptions;\n                if (this.media.rollOverImg) {\n                    this.rollOverImgStyle = this.parseImageOptions(this.media.rollOverImg, mediaOptions, componentSize);\n                } else {\n                    this.rollOverImgStyle = null;\n                }\n                if (this.media.img) {\n                    this.imgStyle = this.parseImageOptions(this.media.img, mediaOptions, componentSize);\n                    this.setCSSStyle(this.imgStyle);\n                } else {\n                    this.imgStyle = null;\n                    this.setCSSStyle(this.clearStyle);\n                }\n            }\n        }\n    }\n\n    private parseImageOptions(image, mediaOptions: number, componentSize): Map<string, any> {\n        const bgstyle = new Map();\n        bgstyle.set('background-image', 'url(\\'' + image + '\\')');\n        bgstyle.set('background-repeat', 'no-repeat');\n        bgstyle.set('background-position', 'left');\n        bgstyle.set('display', 'inline-block');\n        bgstyle.set('vertical-align', 'middle');\n        if (mediaOptions === undefined) mediaOptions = 14; // reduce-enlarge & keep aspect ration\n        const mediaKeepAspectRatio = mediaOptions === 0 || ((mediaOptions & 8) === 8);\n\n        // default  img size values\n        let imgWidth = 16;\n        let imgHeight = 16;\n\n        if (image.indexOf('imageWidth=') > 0 && image.indexOf('imageHeight=') > 0) {\n            const vars = {};\n            image.replace(/[?&]+([^=&]+)=([^&]*)/gi,\n                (m, key, value) => {\n                    vars[key] = value;\n                });\n            imgWidth = vars['imageWidth'];\n            imgHeight = vars['imageHeight'];\n        }\n\n        const widthChange = imgWidth / componentSize.width;\n        const heightChange = imgHeight / componentSize.height;\n\n        if (widthChange > 1.01 || heightChange > 1.01 || widthChange < 0.99 || heightChange < 0.99) {\n            if ((mediaOptions & 6) === 6) {\n                if (mediaKeepAspectRatio) {\n                    if (widthChange > heightChange) {\n                        imgWidth = imgWidth / widthChange;\n                        imgHeight = imgHeight / widthChange;\n                    } else {\n                        imgWidth = imgWidth / heightChange;\n                        imgHeight = imgHeight / heightChange;\n                    }\n                } else {\n                    imgWidth = componentSize.width;\n                    imgHeight = componentSize.height;\n                }\n            } else if ((mediaOptions & 2) == 2) {\n                if (widthChange > 1.01 && heightChange > 1.01) {\n                    if (mediaKeepAspectRatio) {\n                        if (widthChange > heightChange) {\n                            imgWidth = imgWidth / widthChange;\n                            imgHeight = imgHeight / widthChange;\n                        } else {\n                            imgWidth = imgWidth / heightChange;\n                            imgHeight = imgHeight / heightChange;\n                        }\n                    } else {\n                        imgWidth = componentSize.width;\n                        imgHeight = componentSize.height;\n                    }\n                } else if (widthChange > 1.01) {\n                    imgWidth = imgWidth / widthChange;\n                    if (mediaKeepAspectRatio) {\n                        imgHeight = imgHeight / widthChange;\n                    } else {\n                        imgHeight = componentSize.height;\n                    }\n                } else if (heightChange > 1.01) {\n                    imgHeight = imgHeight / heightChange;\n                    if (mediaKeepAspectRatio) {\n                        imgWidth = imgWidth / heightChange;\n                    } else {\n                        imgWidth = componentSize.width;\n                    }\n                }\n            } else if ((mediaOptions & 4) == 4) {\n                if (widthChange < 0.99 && heightChange < 0.99) {\n                    if (mediaKeepAspectRatio) {\n                        if (widthChange > heightChange) {\n                            imgWidth = imgWidth / widthChange;\n                            imgHeight = imgHeight / widthChange;\n                        } else {\n                            imgWidth = imgWidth / heightChange;\n                            imgHeight = imgHeight / heightChange;\n                        }\n                    } else {\n                        imgWidth = componentSize.width;\n                        imgHeight = componentSize.height;\n                    }\n                } else if (widthChange < 0.99) {\n                    imgWidth = imgWidth / widthChange;\n                    if (mediaKeepAspectRatio) {\n                        imgHeight = imgHeight / widthChange;\n                    } else {\n                        imgHeight = componentSize.height;\n                    }\n                } else if (heightChange < 0.99) {\n                    imgHeight = imgHeight / heightChange;\n                    if (mediaKeepAspectRatio) {\n                        imgWidth = imgWidth / heightChange;\n                    } else {\n                        imgWidth = componentSize.width;\n                    }\n                }\n            }\n        }\n\n        bgstyle.set('background-size', mediaKeepAspectRatio ? 'contain' : '100% 100%');\n        bgstyle.set('width', Math.round(imgWidth) + 'px');\n        bgstyle.set('height', Math.round(imgHeight) + 'px');\n\n        return bgstyle;\n    }\n\n    private setCSSStyle(cssStyle: Map<string, any>) {\n        cssStyle.forEach((value: any, key: string) => {\n            this._renderer.setStyle(this._elemRef.nativeElement, key, value);\n        });\n    }\n}\n","import { Directive , HostListener, ElementRef} from '@angular/core';\nimport { ServoyPublicService } from '../services/servoy_public.service';\n\n@Directive({\n  selector: '[svyAutosave]'\n})\nexport class AutosaveDirective {\n\n  constructor(private servoyService: ServoyPublicService, private elementRef: ElementRef) {\n  }\n\n  @HostListener('click', ['$event.target'])\n  onClick(target): void {\n    if (target == this.elementRef.nativeElement || target.parentNode == this.elementRef.nativeElement) {\n      this.servoyService.callService('applicationServerService', 'autosave', {}, true);\n    }\n  }\n}\n","import { Directive , Input, OnInit, HostListener} from '@angular/core';\nimport { ServoyPublicService } from '../services/servoy_public.service';\n\n@Directive({\n  selector: '[svyUpload]'\n})\nexport class UploadDirective implements OnInit {\n    @Input() formname: string;\n    @Input() componentName: string;\n\n    private url: string;\n    private propertyName = 'dataProviderID';\n\n    constructor(private servoyService: ServoyPublicService) {\n    }\n\n    @HostListener('click') click(e: Event) {\n        this.servoyService.showFileOpenDialog('Please select a file', false, null, this.url);\n    }\n\n    ngOnInit(): void {\n        this.url = this.servoyService.generateUploadUrl(this.formname, this.componentName, this.propertyName);\n    }\n\n}\n","import { DOCUMENT } from '@angular/common';\r\nimport { Inject, Renderer2 } from '@angular/core';\r\nimport { Format, FormattingService } from './formatting.service';\r\n\r\nconst MASK_CONST = {\r\n    // Predefined character definitions\r\n    definitions: {\r\n        '#': '[0-9]',\r\n        0: '[0-9]',\r\n        U: '[A-Z]',\r\n        L: '[a-z]',\r\n        A: '[A-Za-z0-9]',\r\n        '?': '[A-Za-z]',\r\n        '*': '.',\r\n        H: '[A-F0-9]'\r\n    },\r\n    converters: {\r\n        U(c) {\nreturn c.toUpperCase();\n},\r\n        L(c) {\nreturn c.toLowerCase();\n},\r\n        H(c) {\nreturn c.toUpperCase();\n}\r\n    }\r\n};\r\n\r\nexport class MaskFormat {\r\n    private ignore: boolean;\r\n    private firstNonMaskPos = -1;\r\n    private settings: Object;\r\n    private buffer: string[] = [];\r\n    private tests: RegExp[] = [];\r\n    private converters: any[] = [];\r\n    private mask: string;\r\n    private focusText: string;\r\n    private filteredMask: string;\r\n\r\n    constructor(private format: Format, private _renderer: Renderer2, private element: HTMLInputElement,\r\n                        private formatService: FormattingService, @Inject(DOCUMENT) private doc: Document) {\r\n        this.ignore = false;\r\n        this.settings = {};\r\n        this.settings['placeholder'] = this.format.placeHolder ? this.format.placeHolder : ' ';\r\n        if (this.format.allowedCharacters)\r\n        this.settings['allowedCharacters'] = this.format.allowedCharacters;\r\n\r\n        if (!this.settings['completed']) {\r\n            this.settings['completed'] = null;\r\n        }\r\n\r\n        this.mask = this.format.edit;\r\n//          if (!this.mask && this.element.value.length > 0) { //TODO check condition\r\n//              return this.buffer.map(function(c, i) { //TODO why return??\r\n//                  return this.tests[i] ? c : null;\r\n//              }, this).join('');\r\n//          }\r\n\r\n        let skipNextMask = false;\r\n        this.filteredMask = '';\r\n        const defs = MASK_CONST.definitions;\r\n        const converts = MASK_CONST.converters;\r\n        this.converters = [];\r\n        let partialPosition = this.mask.length;\r\n        let len = this.mask.length;\r\n\r\n        const chars = this.mask.split('');\r\n        for (let i = 0 ; i < chars.length; i++) {\r\n            const c = chars[i];\r\n//            if (c == '?') {\r\n//                len--;\r\n//                partialPosition = i;\r\n//            } else\r\n            if (!skipNextMask && c === '\\'') {\r\n                skipNextMask = true;\r\n                len--;\r\n                partialPosition--;\r\n            } else {\r\n                if (!skipNextMask && defs[c]) {\r\n                    if (c === '*' && this.settings['allowedCharacters']) {\r\n                        this.tests.push(new RegExp('[' + this.settings['allowedCharacters'] + ']'));\r\n                    } else {\r\n                        this.tests.push(new RegExp(defs[c]));\r\n                    }\r\n                    if (this.firstNonMaskPos === -1)\r\n                        this.firstNonMaskPos =  this.tests.length - 1;\r\n                } else {\r\n                    this.tests.push(null);\r\n                    skipNextMask = false;\r\n                }\r\n                this.converters.push(converts[c]);\r\n                this.filteredMask += c;\r\n            }\r\n        }\r\n\r\n\r\n        this.buffer = this.filteredMask.split('').map(function(c, i, array) {\r\n            return this.tests[i] ? this.getPlaceHolder(i) : c;\r\n        }, this);\r\n\r\n        this._renderer.listen(this.element, 'input', () => {\nthis.setCaret(this.checkVal(true));\n});\r\n        this._renderer.listen(this.element, 'focus', () => this.onFocus());\r\n        this._renderer.listen(this.element, 'blur', () => this.onBlur());\r\n        this._renderer.listen(this.element, 'keypress', (event) => this.onKeypress(event));\r\n        this._renderer.listen(this.element, 'keydown', (event) => this.onKeydown(event));\r\n    }\r\n\r\n    private onFocus() {\r\n        this.focusText = this.element.value;\r\n        const pos = this.checkVal(true);\r\n        this.writeBuffer();\r\n        setTimeout( () => this.setCaretOnFocus(pos), 0);\r\n    }\r\n\r\n    private setCaretOnFocus(pos) {\r\n        if (pos !== this.filteredMask.length) {\r\n            this.setCaret(pos);\r\n        } else {\r\n            this.setCaret(this.element.selectionStart);\r\n        }\r\n    }\r\n\r\n    private onBlur() {\r\n        this.checkVal(true);\r\n        if (this.element.value !== this.focusText) {\r\n            this.element.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { text: () => this.element.value } }));\r\n        }\r\n    }\r\n\r\n    private onKeypress(e) {\r\n        if (this.formatService.testKeyPressed(e, 13) && e.target.tagName.toUpperCase() === 'INPUT') {\r\n            //do not looses focus, just apply the format and push value\r\n            this.element.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { text: () => this.element.value } }));\r\n            return true;\r\n        }\r\n        if (this.ignore) {\r\n            this.ignore = false;\r\n            // Fixes Mac FF bug on backspace\r\n            return (e.keyCode === 8) ? false : null;\r\n        }\r\n        // TODO needed? e = e || window.event;\r\n        const k = e.charCode || e.keyCode || e.which;\r\n        const posBegin = this.element.selectionStart;\r\n        const posEnd = this.element.selectionEnd;\r\n\r\n        if (e.ctrlKey || e.altKey || e.metaKey) {// Ignore\r\n            return true;\r\n        } else if ((k >= 32 && k <= 125) || k > 186) {// typeable characters\r\n            const p = this.seekNext(posBegin - 1);\r\n            if (p < this.mask.length) {\r\n                let c = String.fromCharCode(k);\r\n                if (this.converters[p]) {\r\n                    c = this.converters[p](c);\r\n                }\r\n                if (this.tests[p].test(c)) {\r\n//                    shiftR(p);\r\n                    this.buffer[p] = c;\r\n                    this.writeBuffer();\r\n                    const next = this.seekNext(p);\r\n                    this.setCaret(next);\r\n                    if (this.settings['completed'] && next == this.mask.length)\r\n                        this.settings['completed'].call(this.element);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private onKeydown(e: KeyboardEvent) {\r\n        const iPhone = (window.orientation !== undefined);\r\n        let posBegin = this.element.selectionStart;\r\n        let posEnd = this.element.selectionEnd;\r\n        const k = e.keyCode;\r\n        this.ignore = (k < 16 || (k > 16 && k < 32) || (k > 32 && k < 41));\r\n        if (k === 37) {\r\n            const nextValidChar = this.seekPrevious(posBegin);\r\n            if (nextValidChar !== posBegin) {\r\n                this.setCaret(nextValidChar);\r\n                return false;\r\n            }\r\n            return;\r\n        } else if (k === 39) {\r\n            const nextValidChar = this.seekNext(posBegin);\r\n            if (nextValidChar !== posBegin) {\r\n                this.setCaret(nextValidChar);\r\n                return false;\r\n            }\r\n            return;\r\n        } else {\r\n            const nextValidChar = this.seekNext(posBegin - 1) - posBegin;\r\n            if (nextValidChar > 0) {\r\n                posBegin += nextValidChar;\r\n                posEnd += nextValidChar;\r\n            }\r\n        }\r\n\r\n        // backspace, delete, and escape get special treatment\r\n        if (k === 8 || k === 46 || (iPhone && k === 127)) {\r\n            if (posBegin === posEnd) {\r\n                this.clear(posBegin + (k === 46 ? 0 : -1), (k === 46 ? 1 : 0));\r\n            } else {\r\n                this.clearBuffer(posBegin, posEnd);\r\n                this.writeBuffer();\r\n                this.setCaret(Math.max(this.firstNonMaskPos, posBegin));\r\n            }\r\n            return false;\r\n        } else if (k === 27) {// escape\r\n            this.element.value = this.focusText;\r\n            this.setCaret(0, this.checkVal());\r\n            return false;\r\n        } else if (posBegin !== posEnd && !this.ignore) {\r\n            this.clearBuffer(posBegin, posEnd);\r\n        }\r\n    }\r\n\r\n    private setCaret(begin: number, end?: number) {\r\n        if (this.element.value.length === 0) return;\r\n        if (typeof begin === 'number') {\r\n            end = (typeof end === 'number') ? end : begin;\r\n                if (this.element != null) {\r\n                      if (this.element['createTextRange']) {\r\n                          const range = this.element['createTextRange']();\r\n                          range.move('character', begin);\r\n                          range.select();\r\n                      } else if (this.element.selectionStart >= 0) {\r\n                        this.element.setSelectionRange(begin, end);\r\n                      }\r\n                }\r\n        } else {\r\n            if (this.element['setSelectionRange']) {\r\n                begin = this.element.selectionStart;\r\n                end = this.element.selectionEnd;\r\n            } else if (this.doc.getSelection() && this.doc.getSelection()['createRange']) {\r\n                const range = this.doc.getSelection()['createRange']();\r\n                begin = 0 - range.duplicate().moveStart('character', -100000);\r\n                end = begin + range.text.length;\r\n            }\r\n            return { begin, end };\r\n        }\r\n    }\r\n\r\n    private seekPrevious(pos: number): number {\r\n        while (--pos >= 0 && !this.tests[pos]);\r\n        return pos;\r\n    }\r\n\r\n    private seekNext(pos: number): number {\r\n        while (++pos <= this.mask.length && !this.tests[pos]);\r\n        return pos;\r\n    }\r\n\r\n    private clear(pos, caretAddition) {\r\n        while (!this.tests[pos] && --pos >= 0);\r\n        if (this.tests[pos]) {\r\n            this.buffer[pos] = this.getPlaceHolder(pos);\r\n        }\r\n        this.writeBuffer();\r\n        if (caretAddition !== 0) {\r\n            let nextPos = pos + caretAddition;\r\n            while ( nextPos >= 0 && nextPos < this.mask.length ) {\r\n                if (this.tests[nextPos]) {\r\n                    pos = nextPos;\r\n                    break;\r\n                }\r\n                nextPos = nextPos + caretAddition;\r\n            }\r\n        }\r\n        this.setCaret(Math.max(this.firstNonMaskPos, pos));\r\n    }\r\n\r\n    private clearBuffer(start: number, end: number) {\r\n        for (let i = start; i < end && i < this.mask.length; i++) {\r\n            if (this.tests[i])\r\n                this.buffer[i] = this.getPlaceHolder(i);\r\n        }\r\n    }\r\n\r\n    private writeBuffer(): string {\r\n        this.element.value = this.buffer.join('');\r\n        return this.element.value;\r\n    }\r\n\r\n    private checkVal(allow = false): number {\r\n        // try to place characters where they belong\r\n        const partialPosition = this.mask.length;\r\n        const test = this.element.value;\r\n        let lastMatch = -1;\r\n        let firstError = -1;\r\n        for (let i = 0, pos = 0; i < this.mask.length; i++) {\r\n            if (this.tests[i]) {\r\n                this.buffer[i] = this.getPlaceHolder(i);\r\n                while (pos++ < test.length) {\r\n                    const c = test.charAt(pos - 1);\r\n                    // if the char is the place holder then dont shift..\r\n                    if (c === this.buffer[i]) {\r\n                       if (firstError === -1) firstError = i;\r\n                       break;\r\n                    }\r\n                    if (this.tests[i].test(c)) {\r\n                        this.buffer[i] = c;\r\n                        lastMatch = i;\r\n                        break;\r\n                    }\r\n                }\r\n                if (pos > test.length)\r\n                    break;\r\n            } else if (this.buffer[i] === test.charAt(pos) && i !== partialPosition) {\r\n                pos++;\r\n//                    lastMatch = i;\r\n            }\r\n        }\r\n        if (!allow && lastMatch + 1 < partialPosition) {\r\n            this.element.value = '';\r\n            this.clearBuffer(0, this.mask.length);\r\n        } else if (allow && lastMatch === -1) {\r\n            this.element.value = '';\r\n            this.clearBuffer(0, this.mask.length);\r\n        } else if (allow || lastMatch + 1 >= partialPosition) {\r\n            this.writeBuffer();\r\n            if (!allow) this.element.value = this.element.value.substring(0, lastMatch + 1);\r\n        }\r\n        return firstError !== -1 ? firstError : (partialPosition ? lastMatch : this.firstNonMaskPos);\r\n    }\r\n\r\n    private getPlaceHolder(i: number): any {\r\n        return this.settings['placeholder'].length > 1 ? this.settings['placeholder'].charAt(i) : this.settings['placeholder'];\r\n    }\r\n}\r\n\r\n","\r\nimport { Directive, Renderer2, ElementRef, Input, HostListener, forwardRef, AfterViewInit, OnChanges, Inject } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { MaskFormat } from './maskformat';\r\nimport { Format, FormattingService } from './formatting.service';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { LoggerFactory, LoggerService } from '../logger.service';\r\n\r\n\r\nclass NumberParser {\r\n  private _group: RegExp;\r\n    private _decimal: RegExp;\r\n    private _numeral: RegExp;\r\n    private _index: (d: any) => string;\r\n  constructor() {\r\n    const locale = new Intl.NumberFormat().resolvedOptions().locale;\r\n    const parts = (new Intl.NumberFormat(locale) as any).formatToParts(12345.6);\r\n    const numerals = [...new Intl.NumberFormat(locale, {useGrouping: false}).format(9876543210)].reverse();\r\n    const index = new Map(numerals.map((d, i) => [d, i]));\r\n    this._group = new RegExp(`[${parts.find(d => d.type === 'group').value}]`, 'g');\r\n    this._decimal = new RegExp(`[${parts.find(d => d.type === 'decimal').value}]`);\r\n    this._numeral = new RegExp(`[${numerals.join('')}]`, 'g');\r\n    this._index = d => index.get(d).toString();\r\n  }\r\n  parse(str: string) {\r\n    return (str.trim().replace(this._group, '').replace(this._decimal, '.').replace(this._numeral, this._index)) ? +str : NaN;\r\n  }\r\n}\r\n\r\n@Directive({\r\n\r\n    // eslint-disable-next-line @angular-eslint/directive-selector\r\n    selector: '[svyFormat]',\r\n    providers: [{\r\n        provide: NG_VALUE_ACCESSOR,\r\n        useExisting: forwardRef(() => FormatDirective),\r\n        multi: true\r\n    }]\r\n})\r\nexport class FormatDirective implements ControlValueAccessor, AfterViewInit, OnChanges {\r\n    private static DATETIMEFORMAT: Format = {display:'yyyy-MM-ddTHH:mm:ss', type:'DATETIME'} as Format;\r\n    private static DATEFORMAT: Format = {display:'yyyy-MM-dd', type:'DATETIME'} as Format;\r\n    private static MONTHFORMAT: Format = {display:'yyyy-MM', type:'DATETIME'} as Format;\r\n    private static WEEKFORMAT: Format = {display:'YYYY-[W]WW', type:'DATETIME'} as Format;\r\n    private static TIMEFORMAT: Format = {display:'HH:mm', type:'DATETIME'} as Format;\r\n    private static BROWSERNUMBERFORMAT = new NumberParser();\r\n\r\n    @Input('svyFormat') format: Format;\r\n    @Input() findmode: boolean;\r\n\r\n    private hasFocus = false;\r\n    private realValue = null;\r\n\r\n    private isKeyPressEventFired = false;\r\n    private oldInputValue = null;\r\n    private listeners = [];\r\n    private readonly log: LoggerService;\r\n\r\n    constructor(private _renderer: Renderer2, private _elementRef: ElementRef, private formatService: FormattingService,\r\n        @Inject(DOCUMENT) private doc: Document, logFactory: LoggerFactory) {\r\n        this.log = logFactory.getLogger('formatdirective');\r\n    }\r\n\r\n    @HostListener('blur', []) touched() {\r\n        this.onTouchedCallback();\r\n        this.hasFocus = false;\r\n        if (this.format.display && this.format.edit && this.format.edit !== this.format.display) {\r\n            this.writeValue(this.realValue);\r\n        }\r\n    }\r\n\r\n    @HostListener('focus', []) focussed() {\r\n        this.hasFocus = true;\r\n        if (this.format.display && this.format.edit && this.format.edit !== this.format.display) {\r\n            this.writeValue(this.realValue);\r\n        }\r\n    }\r\n\r\n    @HostListener('change', ['$event.target.value']) input(value: any) {\r\n        let data = value;\r\n        const inputType = this.getType();\r\n        if (inputType === 'datetime-local') {\r\n             data = this.formatService.unformat(value, FormatDirective.DATETIMEFORMAT.display, FormatDirective.DATETIMEFORMAT.type, this.realValue);\r\n        } else if (inputType === 'date') {\r\n             data = this.formatService.unformat(value, FormatDirective.DATEFORMAT.display, FormatDirective.DATEFORMAT.type, this.realValue);\r\n        } else if (inputType === 'time') {\r\n             data = this.formatService.unformat(value, FormatDirective.TIMEFORMAT.display, FormatDirective.TIMEFORMAT.type, this.realValue);\r\n        } else if (inputType === 'month') {\r\n             data = this.formatService.unformat(value, FormatDirective.MONTHFORMAT.display, FormatDirective.MONTHFORMAT.type, this.realValue);\r\n        } else if (inputType === 'week') {\r\n             data = this.formatService.unformat(value, FormatDirective.WEEKFORMAT.display, FormatDirective.WEEKFORMAT.type, this.realValue);\r\n        } else if (inputType === 'number') {\r\n             data = FormatDirective.BROWSERNUMBERFORMAT.parse(value);\r\n        } else if (inputType === 'email') {\r\n             data = value;\r\n        } else if (!this.findmode && this.format) {\r\n            const type = this.format.type;\r\n            let format = this.format.display ? this.format.display : this.format.edit;\r\n            if (this.hasFocus && this.format.edit && !this.format.isMask) format = this.format.edit;\r\n            try {\r\n                data = this.formatService.unformat(data, format, type, this.realValue);\r\n            } catch (e) {\r\n                this.log.error(e);\r\n                //TODO set error state\r\n            }\r\n            if (this.format.type === 'TEXT' && this.format.isRaw && this.format.isMask) {\r\n                if (data && format && data.length === format.length) {\r\n                    let ret = '';\r\n                    for (let i = 0; i < format.length; i++) {\r\n                        switch (format[i]) {\r\n                            case 'U':\r\n                            case 'L':\r\n                            case 'A':\r\n                            case '?':\r\n                            case '*':\r\n                            case 'H':\r\n                            case '#':\r\n                                ret += data[i];\r\n                                break;\r\n                            default:\r\n                                // ignore literal characters\r\n                                break;\r\n                        }\r\n                    }\r\n                    data = ret;\r\n                }\r\n            }\r\n        }\r\n        this.realValue = data;\r\n        this.onChangeCallback(data);\r\n    }\r\n\r\n    onChangeCallback = (_: any) => { };\r\n    onTouchedCallback = () => { };\r\n\r\n    ngAfterViewInit(): void {\r\n        this.setFormat();\r\n    }\r\n\r\n    ngOnChanges(): void {\r\n        this.setFormat();\r\n    }\r\n\r\n    registerOnChange(fn: any) {\r\n        this.onChangeCallback = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: any) {\r\n        this.onTouchedCallback = fn;\r\n    }\r\n\r\n\r\n    writeValue(value: any): void {\r\n        this.realValue = value;\r\n        const inputType = this.getType();\r\n        if (inputType === 'datetime-local') {\r\n             const data = this.formatService.format(value, FormatDirective.DATETIMEFORMAT, false);\r\n             this._renderer.setProperty(this._elementRef.nativeElement, 'value', data);\r\n        } else if (inputType === 'date') {\r\n            const data = this.formatService.format(value, FormatDirective.DATEFORMAT, false);\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', data);\r\n        } else if (inputType === 'time') {\r\n            const data = this.formatService.format(value, FormatDirective.TIMEFORMAT, false);\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', data);\r\n        } else if (inputType === 'month') {\r\n            const data = this.formatService.format(value, FormatDirective.MONTHFORMAT, false);\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', data);\r\n        } else if (inputType === 'week') {\r\n            const data = this.formatService.format(value, FormatDirective.WEEKFORMAT, false);\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', data);\r\n        } else if (inputType === 'number') {\r\n            const data = value?new Intl.NumberFormat().format(value):'';\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', data);\r\n        } else if (inputType === 'email') {\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', value);\r\n        } else if (value && this.format) {\r\n            let data = value;\r\n            if (!this.findmode) {\r\n                data = inputType  === 'number' && data.toString().length >= this.format.maxLength ? data.toString().substring(0, this.format.maxLength) : data;\r\n                let useEdit = !this.format.display;\r\n                if (this.format.edit && !this.format.isMask && this.hasFocus) useEdit = true;\r\n                try {\r\n                    data = this.formatService.format(data, this.format, useEdit);\r\n                } catch (e) {\r\n                    this.log.error(e);\r\n                }\r\n                if (data && this.format.type === 'TEXT') {\r\n                    if (this.format.uppercase) data = data.toUpperCase();\r\n                    else if (this.format.lowercase) data = data.toLowerCase();\r\n                }\r\n            }\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', data);\r\n        } else {\r\n            this._renderer.setProperty(this._elementRef.nativeElement, 'value', value ? value : '');\r\n        }\r\n    }\r\n\r\n    private getType(): string {\r\n        const type = this._elementRef.nativeElement.type as string;\r\n        return type?type.toLocaleLowerCase():'text';\r\n    }\r\n\r\n    private setFormat() {\r\n        this.listeners.forEach(lFn => lFn());\r\n        this.listeners = [];\r\n        if (this.format) {\r\n            if (!this.findmode && (this.format.uppercase || this.format.lowercase)) {\r\n                this.listeners.push(this._renderer.listen(this._elementRef.nativeElement, 'input', () => this.upperOrLowerCase()));\r\n            }\r\n            if (this.format.isNumberValidator || this.format.type === 'NUMBER' || this.format.type === 'INTEGER') {\r\n                this.listeners.push(this._renderer.listen(this._elementRef.nativeElement, 'keypress', (event) => {\r\n                    this.isKeyPressEventFired = true;\r\n                    return this.formatService.testForNumbersOnly(event, null, this._elementRef.nativeElement, this.findmode, true, this.format, false);\r\n                }));\r\n                this.listeners.push(this._renderer.listen(this._elementRef.nativeElement, 'input', (event) => this.inputFiredForNumbersCheck(event)));\r\n            }\r\n            if (this.format.maxLength) {\r\n                if (!this.findmode) {\r\n                    this._renderer.setAttribute(this._elementRef.nativeElement, 'maxlength', this.format.maxLength + '');\r\n                } else {\r\n                    this._renderer.removeAttribute(this._elementRef.nativeElement, 'maxlength');\r\n                }\r\n            }\r\n            if (!this.findmode && this.format.isMask) {\r\n                new MaskFormat(this.format, this._renderer, this._elementRef.nativeElement, this.formatService, this.doc);\r\n            }\r\n            this.writeValue(this.realValue);\r\n        }\r\n    }\r\n\r\n    // lower and upper case handling\r\n\r\n    private upperOrLowerCase() {\r\n        const element = this._elementRef.nativeElement;\r\n        const caretPos = element.selectionStart;\r\n        element.value = this.format.uppercase ? element.value.toUpperCase() : element.value.toLowerCase();\r\n        element.setSelectionRange(caretPos, caretPos);\r\n    }\r\n\r\n    private inputFiredForNumbersCheck(event: Event) {\r\n        let currentValue = this._elementRef.nativeElement.value;\r\n\r\n        if (!this.isKeyPressEventFired && (event.target as HTMLElement).tagName.toUpperCase() === 'INPUT') {\r\n            // get inserted chars\r\n            const inserted = this.findDelta(currentValue, this.oldInputValue);\r\n            // get removed chars\r\n            const removed = this.findDelta(this.oldInputValue, currentValue);\r\n            // determine if user pasted content\r\n            const pasted = inserted.length > 1 || (!inserted && !removed);\r\n\r\n            if (!pasted && !removed) {\r\n                if (!this.formatService.testForNumbersOnly(event, inserted, this._elementRef.nativeElement, this.findmode, true, this.format, true)) {\r\n                    currentValue = this.oldInputValue;\r\n                }\r\n            }\r\n\r\n            //If number validator, check all chars in string and extract only the valid chars.\r\n            if ((event.target as HTMLInputElement).type.toUpperCase() === 'NUMBER' || this.format.type === 'NUMBER' || this.format.type === 'INTEGER' || this.format.isNumberValidator) {\r\n                currentValue = this.getNumbersFromString(event, currentValue, this.oldInputValue);\r\n            }\r\n\r\n            if (currentValue !== this._elementRef.nativeElement.value) {\r\n                this._elementRef.nativeElement.value = currentValue;\r\n\r\n                // // detect IE8 and above, and Edge; call on change manually because of https://bugs.jquery.com/ticket/10818\r\n                // if (/MSIE/.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge/.test(navigator.userAgent)) {\r\n                // \tvar changeOnBlurForIE = function() {\r\n                // \t\t element.change();\r\n                // \t\t element.off(\"blur\", callChangeOnBlur);\r\n                // \t }\r\n                // \t element.on(\"blur\", changeOnBlurForIE);\r\n                // }\r\n            }\r\n\r\n            this.oldInputValue = currentValue;\r\n            this.isKeyPressEventFired = false;\r\n        }\r\n\r\n        if (this.isKeyPressEventFired) {\r\n            this.oldInputValue = currentValue;\r\n            this.isKeyPressEventFired = false;\r\n        }\r\n    }\r\n\r\n    private findDelta(value: string, prevValue: string): string {\r\n        let delta = '';\r\n        if (typeof value === 'string' && typeof prevValue === 'string' && value.length >= prevValue.length) {\r\n            for (let i = 0; i < value.length; i++) {\r\n                const str = value.substr(0, i) + value.substr(i + value.length - prevValue.length);\r\n                if (str === prevValue) {\r\n                    delta = value.substr(i, value.length - prevValue.length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return delta;\r\n    }\r\n\r\n    private getNumbersFromString(e: Event, currentValue: string, oldInputValue: string) {\r\n        if (oldInputValue === currentValue) {\r\n            return currentValue;\r\n        }\r\n        let stripped = '';\r\n        for (let i = 0; i < currentValue.length; i++) {\r\n            if (this.formatService.testForNumbersOnly(e, currentValue.charAt(i), this._elementRef.nativeElement, this.findmode, true, this.format, true)) {\r\n                stripped = stripped + currentValue.charAt(i);\r\n                if (stripped.length === this.format.maxLength) break;\r\n            }\r\n        }\r\n        return stripped;\r\n    }\r\n}\r\n\r\n\r\n","import { Directive, Input, OnInit, HostBinding, ElementRef, HostListener, OnDestroy, ChangeDetectorRef, SimpleChanges, OnChanges } from '@angular/core';\n\n@Directive({\n    selector: '[sabloTabseq]'\n})\nexport class SabloTabseq implements OnInit, OnChanges, OnDestroy {\n\n    @Input('sabloTabseq') designTabSeq: number;\n    @Input('sabloTabseqConfig') config: any;\n    @HostBinding('attr.tabindex') tabindex: number;\n\n    designChildIndexToArrayPosition = {};\n    designChildTabSeq = []; // contains ordered numbers that will be keys in 'runtimeChildIndexes'; can have duplicates\n    runtimeChildIndexes = {}; // map designChildIndex[i] -> runtimeIndex for child or designChildIndex[i] -> [runtimeIndex1, runtimeIndex2] in case there are multiple equal design time indexes\n    runtimeIndex;\n    initializing: boolean;\n    isEnabled: boolean;\n\n    constructor(private _elemRef: ElementRef, private cdRef: ChangeDetectorRef) {\n    }\n\n    // handle event: Child Servoy Tab Sequence registered\n    @HostListener('registerCSTS', ['$event.detail[0]', '$event.detail[1]', '$event'])\n    registerChildHandler(designChildIndex, runtimeChildIndex, event): boolean {\n        if (this.designTabSeq === -2 || designChildIndex === -2) {\n            this.recalculateIndexesHandler(designChildIndex ? designChildIndex : 0, false);\n            event.stopPropagation();\n            return false;\n        }\n\n        // insert it sorted\n        let posInDesignArray = 0;\n        for (let tz = 0; tz < this.designChildTabSeq.length && this.designChildTabSeq[tz] < designChildIndex; tz++) {\n            posInDesignArray = tz + 1;\n        }\n        if (posInDesignArray === this.designChildTabSeq.length || this.designChildTabSeq[posInDesignArray] > designChildIndex) {\n            this.designChildTabSeq.splice(posInDesignArray, 0, designChildIndex);\n\n            // always keep in designChildIndexToArrayPosition[i] the first occurrance of design index i in the sorted designChildTabSeq array\n            for (let tz = posInDesignArray; tz < this.designChildTabSeq.length; tz++) {\n                this.designChildIndexToArrayPosition[this.designChildTabSeq[tz]] = tz;\n            }\n            this.runtimeChildIndexes[designChildIndex] = runtimeChildIndex;\n        } else {\n            // its == that means that we have dupliate design indexes; we treat this special - all same design index children as a list in one runtime index array cell\n            if (!this.runtimeChildIndexes[designChildIndex].push) {\n                this.runtimeChildIndexes[designChildIndex] = [this.runtimeChildIndexes[designChildIndex]];\n            }\n            this.runtimeChildIndexes[designChildIndex].push(runtimeChildIndex);\n        }\n\n        this.recalculateIndexesHandler(designChildIndex ? designChildIndex : 0, false);\n        event.stopPropagation();\n        return false;\n    }\n\n    @HostListener('unregisterCSTS', ['$event.detail[0]', '$event.detail[1]', '$event'])\n    unregisterChildHandler(designChildIndex, runtimeChildIndex, event): boolean {\n        if (this.designTabSeq === -2 || designChildIndex === -2) {\n            event.stopPropagation();\n            return false;\n        }\n\n        const posInDesignArray = this.designChildIndexToArrayPosition[designChildIndex];\n        if (posInDesignArray !== undefined) {\n            const keyInRuntimeArray = this.designChildTabSeq[posInDesignArray];\n            const multipleEqualDesignValues = this.runtimeChildIndexes[keyInRuntimeArray].push;\n            if (!multipleEqualDesignValues) {\n                delete this.designChildIndexToArrayPosition[designChildIndex];\n                for (const tmp in this.designChildIndexToArrayPosition) {\n                    if (this.designChildIndexToArrayPosition[tmp] > posInDesignArray) this.designChildIndexToArrayPosition[tmp]--;\n                }\n                this.designChildTabSeq.splice(posInDesignArray, 1);\n                delete this.runtimeChildIndexes[keyInRuntimeArray];\n            } else {\n                this.runtimeChildIndexes[keyInRuntimeArray].splice(this.runtimeChildIndexes[keyInRuntimeArray].indexOf(runtimeChildIndex), 1);\n                if (this.runtimeChildIndexes[keyInRuntimeArray].length === 1) this.runtimeChildIndexes[keyInRuntimeArray] = this.runtimeChildIndexes[keyInRuntimeArray][0];\n            }\n        }\n        event.stopPropagation();\n        return false;\n    }\n\n    // handle event: child tree was now linked or some child needs extra indexes; runtime indexes can be computed starting at the given child;\n    // recalculate Parent Servoy Tab Sequence\n    @HostListener('recalculatePSTS', ['$event.detail[0]', '$event.detail[1]', '$event'])\n    recalculateIndexesHandler(designChildIndex, initialRootRecalculate, event?): boolean {\n        if (this.designTabSeq === -2 || designChildIndex === -2) {\n            if(event) event.stopPropagation();\n            return false;\n        }\n\n        if (!this.initializing) {\n            // a new child is ready/linked; recalculate tab indexes for it and after it\n            const startIdx = (this.designChildIndexToArrayPosition && this.designChildIndexToArrayPosition[designChildIndex] !== undefined) ?\n                this.designChildIndexToArrayPosition[designChildIndex] : 0;\n            this.recalculateChildRuntimeIndexesStartingAt(startIdx, false);\n        } else if (initialRootRecalculate) {\n            // this is $rootScope (one $parent extra cause the directive creates it); we always assume a sabloTabseq directive is bound to it;\n            // now that it is linked we can do initial calculation of tre\n            this.runtimeIndex.startIndex = this.runtimeIndex.nextAvailableIndex = 1;\n            this.recalculateChildRuntimeIndexesStartingAt(0, true);\n        } // else wait for parent tabSeq directives to get linked as well\n\n        if(event) event.stopPropagation();\n        return false;\n    }\n\n    @HostListener('disableTabseq', ['$event'])\n    disableTabseq(event: CustomEvent<boolean>): boolean {\n        this.isEnabled = false;\n        this.recalculateChildRuntimeIndexesStartingAt(0, true);\n        event.stopPropagation();\n        return false;\n    }\n\n    @HostListener('enableTabseq', ['$event'])\n    enableTabseq(event: CustomEvent<boolean>): boolean {\n        this.isEnabled = true;\n        this.trigger(this._elemRef.nativeElement.parentNode, 'recalculatePSTS', [0, false]);\n        event.stopPropagation();\n        return false;\n    }\n\n    ngOnInit(): void {\n        // called by angular in parents first then in children\n        if (!this.designTabSeq) this.designTabSeq = 0;\n\n        this.initializing = true;\n        this.isEnabled = true;\n\n        // runtime index -1 == SKIP focus traversal in browser\n        // runtime index  0 == DEFAULT == design tab seq 0 (not tabIndex attr set to element or it's children)\n        this.runtimeIndex = { startIndex: -1, nextAvailableIndex: -1, sablotabseq: this };\n        // -1 runtime initially for all (in case some node in the tree has -2 design (skip) and children have >= 0,\n        // at runtime all children should be excluded as wel)\n        this.updateCurrentDomElTabIndex();\n\n        // check to see if this is the top-most tabSeq container\n        if (this.config && this.config.root) {\n            // it's root tab seq container (so no parent); just do initial tree calculation\n            this.recalculateIndexesHandler(0, true);\n        } else {\n            if (this.designTabSeq !== -2) {\n                this.trigger(this._elemRef.nativeElement.parentNode, 'registerCSTS', [this.designTabSeq, this.runtimeIndex]);\n            }\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        const change = changes['designTabSeq'];\n        if (change && !change.firstChange) {\n            if (!(this.config && this.config.root)) {\n                if (change.previousValue !== -2) this.trigger(this._elemRef.nativeElement.parentNode, 'unregisterCSTS', [change.previousValue, this.runtimeIndex]);\n                if (!this.designTabSeq) this.designTabSeq = 0;\n                this.runtimeIndex.startIndex = -1;\n                this.runtimeIndex.nextAvailableIndex = -1;\n                this.initializing = true;\n\n                if (this.designTabSeq !== -2) {\n                    this.trigger(this._elemRef.nativeElement.parentNode, 'registerCSTS', [this.designTabSeq, this.runtimeIndex]);\n                    // here we could send [0] instead of [designTabSeq] - it would potentially calculate more but start again from first parent available index,\n                    // not higher index (the end user behavior being the same)\n                    this.trigger(this._elemRef.nativeElement.parentNode, 'recalculatePSTS', [this.designTabSeq]);\n                } else {\n                    this.updateCurrentDomElTabIndex(); // -1 runtime\n                }\n            }\n        }\n    }\n\n    recalculateChildRuntimeIndexesStartingAt(posInDesignArray /*inclusive*/, triggeredByParent): void {\n        if (this.designTabSeq === -2) return;\n\n        if (!this.isEnabled || this.runtimeIndex.startIndex === -1) {\n\n            this.runtimeIndex.nextAvailableIndex = this.runtimeIndex.startIndex;\n            this.runtimeIndex.startIndex = -1;\n        } else if (this.designTabSeq === 0) {\n            // this element doesn't set any tabIndex attribute (default behavior)\n            this.runtimeIndex.nextAvailableIndex = this.runtimeIndex.startIndex;\n            this.runtimeIndex.startIndex = 0;\n        } else if (this.runtimeIndex.startIndex === 0) {\n            this.runtimeIndex.nextAvailableIndex = 0;\n        } else if (this.runtimeIndex.nextAvailableIndex === -1) {\n            const reservedGap = (this.config && this.config.reservedGap) ? this.config.reservedGap : 0;\n            this.runtimeIndex.nextAvailableIndex = this.runtimeIndex.startIndex + reservedGap;\n        }\n\n        if (posInDesignArray === 0) this.updateCurrentDomElTabIndex();\n\n        let recalculateStartIndex = this.runtimeIndex.startIndex;\n        if (posInDesignArray > 0 && posInDesignArray - 1 < this.designChildTabSeq.length) {\n            const runtimeCI = this.runtimeChildIndexes[this.designChildTabSeq[posInDesignArray - 1]]; // this can be an array in case of multiple equal design indexes being siblings\n            recalculateStartIndex = runtimeCI.push ? runtimeCI[runtimeCI.length - 1].nextAvailableIndex : runtimeCI.nextAvailableIndex;\n        }\n\n        for (let i = posInDesignArray; i < this.designChildTabSeq.length; i++) {\n            const childRuntimeIndex = this.runtimeChildIndexes[this.designChildTabSeq[i]];\n            if (childRuntimeIndex.push) {\n                // multiple equal design time indexes as siblings\n                let max = recalculateStartIndex;\n                for (const k in childRuntimeIndex) {\n                    if(childRuntimeIndex.hasOwnProperty(k)) {\n                        childRuntimeIndex[k].startIndex = recalculateStartIndex;\n                        // call recalculate on whole child; normally it only makes sense for same index siblings\n                        // if they are not themselfes containers, just apply the given value\n                        childRuntimeIndex[k].sablotabseq.recalculateChildRuntimeIndexesStartingAt(0, true);\n                        if (max < childRuntimeIndex[k].nextAvailableIndex)\n                            max = childRuntimeIndex[k].nextAvailableIndex;\n                    }\n                }\n                recalculateStartIndex = max;\n            } else {\n                childRuntimeIndex.startIndex = recalculateStartIndex;\n                childRuntimeIndex.sablotabseq.recalculateChildRuntimeIndexesStartingAt(0, true); // call recalculate on whole child\n                recalculateStartIndex = childRuntimeIndex.nextAvailableIndex;\n            }\n        }\n\n        if (this.initializing) this.initializing = undefined; // it's now considered initialized as first runtime index caluculation is done\n\n        let parentRecalculateNeeded;\n        if (this.runtimeIndex.startIndex !== 0 && this.runtimeIndex.startIndex !== -1) {\n            const ownTabIndexBump = this.hasOwnTabIndex() ? 1 : 0;\n            parentRecalculateNeeded = (this.runtimeIndex.nextAvailableIndex < recalculateStartIndex + ownTabIndexBump);\n            const reservedGap = (this.config && this.config.reservedGap) ? this.config.reservedGap : 0;\n            if (parentRecalculateNeeded) this.runtimeIndex.nextAvailableIndex = recalculateStartIndex + reservedGap + ownTabIndexBump;\n        } else {\n            // start index 0 means default (no tabIndex attr. set)\n            parentRecalculateNeeded = false;\n        }\n\n        // if this container now needs more tab indexes than it was reserved; a recalculate on parent needs to be triggered in this case\n        if (parentRecalculateNeeded && !triggeredByParent) this.trigger(this._elemRef.nativeElement.parentNode, 'recalculatePSTS', [this.designTabSeq, false]);\n    }\n\n    hasOwnTabIndex(): boolean {\n        return (!this.config || !(this.config.container || this.config.root));\n    }\n\n    updateCurrentDomElTabIndex(): void {\n        if (this.hasOwnTabIndex()) {\n            if (this.runtimeIndex.startIndex !== 0) {\n                this.setDOMTabIndex(this.runtimeIndex.startIndex);\n            } else {\n                this.setDOMTabIndex(undefined);\n            }\n        }\n    }\n\n    setDOMTabIndex(tabindex): void {\n        this.tabindex = tabindex;\n        this.cdRef.detectChanges();\n    }\n\n    trigger(target, event: string, arg): void {\n        const customEvent = new CustomEvent(event, {\n            bubbles: true,\n            detail: arg\n          });\n        target.dispatchEvent(customEvent);\n    }\n\n    ngOnDestroy(): void {\n        // unregister current tabSeq from parent tabSeq container\n        if(this._elemRef.nativeElement.parentNode) {\n            this.trigger(this._elemRef.nativeElement.parentNode, 'unregisterCSTS', [this.designTabSeq, this.runtimeIndex]);\n        }\n    }\n}\n","import { Injectable } from '@angular/core';\r\n\r\nimport { IterableDiffers, IterableDiffer } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { LoggerFactory, LoggerService } from './logger.service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SpecTypesService {\r\n\r\n    private registeredTypes = new Map<string, typeof BaseCustomObject>();\r\n    private log: LoggerService;\r\n\r\n    constructor(logFactory: LoggerFactory) {\r\n        this.log = logFactory.getLogger('SpecTypesService');\r\n    }\r\n    createType(name: string): BaseCustomObject {\r\n        const classRef = this.registeredTypes.get(name);\r\n        if (classRef) {\r\n            return new classRef();\r\n        }\r\n        this.log.warn('returning just the basic custom object for  ' + name + ' none of the properties will be monitored');\r\n        return new BaseCustomObject();\r\n    }\r\n\r\n    enhanceArrayType<T>(array: Array<T>, iterableDiffers: IterableDiffers): ICustomArray<T> {\r\n        if (!instanceOfChangeAwareValue(array)) {\r\n            array['stateHolder'] = new ArrayState(array, iterableDiffers);\r\n            Object.defineProperty(array, 'getStateHolder', {\r\n                enumerable: false,\r\n                value() {\n                    return this.stateHolder;\n                }\r\n            });\r\n            Object.defineProperty(array, 'markForChanged', {\r\n                enumerable: false,\r\n                value() {\n                    this.stateHolder.notifyChangeListener();\n                }\r\n            });\r\n            array['stateHolder'].initDiffer();\r\n        }\r\n        return array as ICustomArray<T>;\r\n    }\r\n\r\n    registerType(name: string, classRef: typeof BaseCustomObject) {\r\n        this.registeredTypes.set(name, classRef);\r\n    }\r\n\r\n    guessType(val: any): string {\r\n        let guess = null;\r\n\r\n        if (instanceOfCustomArray(val)) {\r\n            guess = 'JSON_arr';\r\n        } else if (instanceOfBaseCustomObject(val)) {\r\n            guess = 'JSON_obj';\r\n        } // else TODO do any other types need guessing?\r\n        //        else { // try to find it in types?\r\n        //            this.registeredTypes.forEach(function(typeConstructorValue, typeNameKey) {\r\n        //                if (val instanceof typeConstructorValue) guess = typeNameKey; // this wouldn't return the converter name like 'JSON_obj' but rather the actual name from spec\r\n        //                of the custom type like \"(...).tab\"\r\n        //            });\r\n        //        }\r\n        return guess;\r\n    }\r\n}\r\n\r\nexport function isChanged(now, prev, conversionInfo) {\r\n    if ((typeof conversionInfo === 'string' || typeof conversionInfo === 'number') && instanceOfChangeAwareValue(now)) {\r\n        return now.getStateHolder().hasChanges();\r\n    }\r\n\r\n    if (now === prev) return false;\r\n    if (now && prev) {\r\n        if (now instanceof Array) {\r\n            if (prev instanceof Array) {\r\n                if (now.length !== prev.length) return true;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        if (now instanceof Date) {\r\n            if (prev instanceof Date) {\r\n                return now.getTime() !== prev.getTime();\r\n            }\r\n            return true;\r\n        }\r\n\r\n        if ((now instanceof Object) && (prev instanceof Object)) {\r\n            // first build up a list of all the properties both have.\r\n            const fulllist = this.getCombinedPropertyNames(now, prev);\r\n            for (const prop in fulllist) {\r\n                // ng repeat creates a child scope for each element in the array any scope has a $$hashKey property which must be ignored since it is not part of the model\r\n                if (prev[prop] !== now[prop]) {\r\n                    if (prop === '$$hashKey') continue;\r\n                    if (typeof now[prop] === 'object') {\r\n                        if (isChanged(now[prop], prev[prop], conversionInfo ? conversionInfo[prop] : undefined)) {\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport const instanceOfChangeAwareValue = (obj: any): obj is IChangeAwareValue =>\r\n    obj != null && (obj).getStateHolder instanceof Function;\r\n\r\n\r\nexport const instanceOfCustomArray = <T>(obj: any): obj is ICustomArray<T> =>\r\n    instanceOfChangeAwareValue(obj) && (obj as ICustomArray<T>).markForChanged instanceof Function;\r\n\r\n\r\nexport const instanceOfBaseCustomObject = (obj: any): obj is BaseCustomObject =>\r\n    instanceOfChangeAwareValue(obj) && (obj).getStateHolder() instanceof BaseCustomObjectState;\r\n\r\n\r\nexport interface IChangeAwareValue {\r\n    getStateHolder(): ChangeAwareState;\r\n}\r\n\r\nexport interface ICustomObject extends IChangeAwareValue {\r\n    getStateHolder(): BaseCustomObjectState;\r\n}\r\n\r\nexport interface ICustomArray<T> extends Array<T>, IChangeAwareValue {\r\n    getStateHolder(): ArrayState;\r\n    markForChanged(): void;\r\n}\r\n\r\nexport interface IValuelist extends Array<{ displayValue: string; realValue: any }> {\r\n    filterList(filterString: string): Observable<any>;\r\n    getDisplayValue(realValue: any): Observable<any>;\r\n    hasRealValues(): boolean;\r\n    isRealValueDate(): boolean;\r\n}\r\n\r\nexport interface IFoundsetFieldsOnly {\r\n\r\n    /**\r\n     * An identifier that allows you to use this foundset via the 'foundsetRef' type;\r\n     * when a 'foundsetRef' type sends a foundset from server to client (for example\r\n     * as a return value of callServerSideApi) it will translate to this identifier\r\n     * on client (so you can use it to find the actual foundset property in the model if\r\n     * server side script put it in the model as well); internally when sending a\r\n     * 'foundset' typed property to server through a 'foundsetRef' typed argument or prop,\r\n     * it will use this foundsetId as well to find it on server and give a real Foundset\r\n     */\r\n    foundsetId: number;\r\n\r\n    /**\r\n     * the size of the foundset on server (so not necessarily the total record count\r\n     * in case of large DB tables)\r\n     */\r\n    serverSize: number;\r\n\r\n    /**\r\n     * this is the data you need to have loaded on client (just request what you need via provided\r\n     * loadRecordsAsync or loadExtraRecordsAsync)\r\n     */\r\n    viewPort: ViewPort;\r\n\r\n    /**\r\n     * array of selected records in foundset; indexes can be out of current\r\n     * viewPort as well\r\n     */\r\n    selectedRowIndexes: number[];\r\n\r\n    /**\r\n     * sort string of the foundset, the same as the one used in scripting for\r\n     * foundset.sort and foundset.getCurrentSort. Example: 'orderid asc'.\r\n     */\r\n    sortColumns: string;\r\n\r\n    /**\r\n     * the multiselect mode of the server's foundset; if this is false,\r\n     * selectedRowIndexes can only have one item in it\r\n     */\r\n    multiSelect: boolean;\r\n\r\n    /**\r\n     * if the foundset is large and on server-side only part of it is loaded (so\r\n     * there are records in the foundset beyond 'serverSize') this is set to true;\r\n     * in this way you know you can load records even after 'serverSize' (requesting\r\n     * viewport to load records at index serverSize-1 or greater will load more\r\n     * records in the foundset)\r\n     */\r\n    hasMoreRows: boolean;\r\n\r\n    /**\r\n     * columnFormats is only present if you specify\r\n     * \"provideColumnFormats\": true inside the .spec file for this foundset property;\r\n     * it gives the default column formatting that Servoy would normally use for\r\n     * each column of the viewport - which you can then also use in the\r\n     * browser yourself; keys are the dataprovider names and values are objects that contain\r\n     * the format contents\r\n     */\r\n    columnFormats: Record<string, any>;\r\n}\r\n\r\nexport interface IFoundset extends IFoundsetFieldsOnly {\r\n\r\n    /**\r\n     * Request a change of viewport bounds from the server; the requested data will be loaded\r\n     * asynchronously in 'viewPort'\r\n     *\r\n     * @param startIndex the index that you request the first record in \"viewPort.rows\" to have in\r\n     *                   the real foundset (so the beginning of the viewPort).\r\n     * @param size the number of records to load in viewPort.\r\n     *\r\n     * @return a promise that will get resolved when the requested records arrived browser-\r\n     *                   side. As with any promise you can register success, error callbacks, finally, ...\r\n     */\r\n    loadRecordsAsync(startIndex: number, size: number): Promise<any>;\r\n\r\n    /**\r\n     * Request more records for your viewPort; if the argument is positive more records will be\r\n     * loaded at the end of the 'viewPort', when negative more records will be loaded at the beginning\r\n     * of the 'viewPort' - asynchronously.\r\n     *\r\n     * @param negativeOrPositiveCount the number of records to extend the viewPort.rows with before or\r\n     *                                after the currently loaded records.\r\n     * @param dontNotifyYet if you set this to true, then the load request will not be sent to server\r\n     *                      right away. So you can queue multiple loadLess/loadExtra before sending them\r\n     *                      to server. If false/undefined it will send this (and any previously queued\r\n     *                      request) to server. See also notifyChanged(). See also notifyChanged().\r\n     *\r\n     * @return a promise that will get resolved when the requested records arrived browser-\r\n     *                   side. As with any promise you can register success, error callbacks, finally, ...\r\n     *                   That allows custom component to make sure that loadExtra/loadLess calls from\r\n     *                   client do not stack on not yet updated viewports to result in wrong bounds.\r\n     */\r\n    loadExtraRecordsAsync(negativeOrPositiveCount: number, dontNotifyYet?: boolean): Promise<any>;\r\n\r\n    /**\r\n     * Request a shrink of the viewport; if the argument is positive the beginning of the viewport will\r\n     * shrink, when it is negative then the end of the viewport will shrink - asynchronously.\r\n     *\r\n     * @param negativeOrPositiveCount the number of records to shrink the viewPort.rows by before or\r\n     *                                after the currently loaded records.\r\n     * @param dontNotifyYet if you set this to true, then the load request will not be sent to server\r\n     *                      right away. So you can queue multiple loadLess/loadExtra before sending them\r\n     *                      to server. If false/undefined it will send this (and any previously queued\r\n     *                      request) to server. See also notifyChanged(). See also notifyChanged().\r\n     *\r\n     * @return a promise that will get resolved when the requested records arrived browser\r\n     *                   -side. As with any promise you can register success, error callbacks, finally, ...\r\n     *                   That allows custom component to make sure that loadExtra/loadLess calls from\r\n     *                   client do not stack on not yet updated viewports to result in wrong bounds.\r\n     */\r\n    loadLessRecordsAsync(negativeOrPositiveCount: number, dontNotifyYet?: boolean): Promise<any>;\r\n\r\n    /**\r\n     * If you queue multiple loadExtraRecordsAsync and loadLessRecordsAsync by using dontNotifyYet = true\r\n     * then you can - in the end - send all these requests to server (if any are queued) by calling\r\n     * this method. If no requests are queued, calling this method will have no effect.\r\n     */\r\n    notifyChanged(): void;\r\n\r\n    /**\r\n     * Sort the foundset by the dataproviders/columns identified by sortColumns.\r\n     *\r\n     * The name property of each sortColumn can be filled with the dataprovider name the foundset provides\r\n     * or specifies. If the foundset is used with a component type (like in table-view) then the name is\r\n     * the name of the component on who's first dataprovider property the sort should happen. If the\r\n     * foundset is used with another foundset-linked property type (dataprovider/tagstring linked to\r\n     * foundsets) then the name you should give in the sortColumn is that property's 'idForFoundset' value\r\n     * (for example a record 'dataprovider' property linked to the foundset will be an array of values\r\n     * representing the viewport, but it will also have a 'idForFoundset' prop. that can be used for\r\n     * sorting in this call; this 'idForFoundset' was added in version 8.0.3).\r\n     *\r\n     * @param sortColumns an array of JSONObjects { name : dataprovider_id,\r\n     *                    direction : sortDirection }, where the sortDirection can be \"asc\" or \"desc\".\r\n     * @return (added in Servoy 8.2.1) a promise that will get resolved when the new sort\r\n     *                   will arrive browser-side. As with any promise you can register success, error\r\n     *                   and finally callbacks.\r\n     */\r\n    sort(sortColumns: Array<{ name: string; direction: ('asc' | 'desc') }>): Promise<any>;\r\n\r\n    /**\r\n     * Request a selection change of the selected row indexes. Returns a promise that is resolved\r\n     * when the client receives the updated selection from the server. If successful, the array\r\n     * selectedRowIndexes will also be updated. If the server does not allow the selection change,\r\n     * the reject function will get called with the 'old' selection as parameter.\r\n     *\r\n     * If requestSelectionUpdate is called a second time, before the first call is resolved, the\r\n     * first call will be rejected and the caller will receive the string 'canceled' as the value\r\n     * for the parameter serverRows.\r\n     * E.g.: foundset.requestSelectionUpdate([2,3,4]).then(function(serverRows){},function(serverRows){});\r\n     */\r\n    requestSelectionUpdate(selectedRowIdxs: number[]): Promise<any>;\r\n\r\n    /**\r\n     * Sets the preferred viewPort options hint on the server for this foundset, so that the next\r\n     * (initial or new) load will automatically return that many rows, even without any of the loadXYZ\r\n     * methods above being called.\r\n     *\r\n     * You can use this when the component size is not known initially and the number of records the\r\n     * component wants to load depends on that. As soon as the component knows how many it wants\r\n     * initially it can call this method.\r\n     *\r\n     * These can also be specified initially using the .spec options \"initialPreferredViewPortSize\" and\r\n     * \"sendSelectionViewportInitially\". But these can be altered at runtime via this method as well\r\n     * because they are used/useful in other scenarios as well, not just initially: for example when a\r\n     * related foundset changes parent record, when a search/find is performed and so on.\r\n     *\r\n     * @param preferredSize the preferred number or rows that the viewport should get automatically\r\n     *                      from the server.\r\n     * @param sendViewportWithSelection if this is true, the auto-sent viewport will contain\r\n     *                                            the selected row (if any).\r\n     * @param centerViewportOnSelected if this is true, the selected row will be in the middle\r\n     *                                           of auto-sent viewport if possible. If it is false, then\r\n     *                                           the foundset property type will assume a 'paging'\r\n     *                                           strategy and will send the page that contains the\r\n     *                                           selected row (here the page size is assumed to be\r\n     *                                           preferredSize).\r\n     */\r\n    setPreferredViewportSize(preferredSize: number, sendViewportWithSelection?: boolean, centerViewportOnSelected?: boolean): void;\r\n\r\n    /**\r\n     * Receives a client side rowID (taken from myFoundsetProp.viewPort.rows[idx]._svyRowId)\r\n     * and gives a Record reference, an object\r\n     * which can be resolved server side to the exact Record via the 'record' property type;\r\n     * for example if you call a handler or a servoyapi.callServerSideApi(...) and want\r\n     * to give it a Record as parameter and you have the rowID and foundset in your code,\r\n     * you can use this method. E.g: servoyapi.callServerSideApi(\"doSomethingWithRecord\",\r\n     *                     [this.myFoundsetProperty.getRecordRefByRowID(clickedRowId)]);\r\n     *\r\n     * NOTE: if in your component you know the whole row (so myFoundsetProp.viewPort.rows[idx])\r\n     * already - not just the rowID - that you want to send you can just give that directly to the\r\n     * handler/serverSideApi; you do not need to use this method in that case. E.g:\r\n     * // if you have the index inside the viewport\r\n     * servoyapi.callServerSideApi(\"doSomethingWithRecord\",\r\n     *           [this.myFoundsetProperty.viewPort.rows[clickedRowIdx]]);\r\n     * // or if you have the row directly\r\n     * servoyapi.callServerSideApi(\"doSomethingWithRecord\", [clickedRow]);\r\n     *\r\n     * This method has been added in Servoy 8.3.\r\n     */\r\n    getRecordRefByRowID(rowId: string): void;\r\n\r\n    /**\r\n     * Adds a change listener that will get triggered when server sends changes for this foundset.\r\n     *\r\n     * @see WebsocketSession.addIncomingMessageHandlingDoneTask if you need your code to execute after all properties that were linked to this foundset\r\n                 get their changes applied you can use WebsocketSession.addIncomingMessageHandlingDoneTask.\r\n     * @param changeListener the listener to register.\r\n     */\r\n    addChangeListener(changeListener: FoundsetChangeListener): () => void;\r\n    removeChangeListener(changeListener: FoundsetChangeListener): void;\r\n\r\n    /**\r\n     * Mark the foundset data as changed on the client.\r\n     * If push to server is allowed for this foundset then the changes will be sent to the server, othwerwise the changes are ignored.\r\n     *\r\n     * @param index is the row index (relative to the viewport) where the data change occurred\r\n     * @param columnID the name of the column\r\n     * @param newValue the new value\r\n     * @param oldValue the old value, is optional; the change is ignored if the oldValue is the same as the newValue\r\n     */\r\n    columnDataChanged(index: number, columnID: string, newValue: any, oldValue?: any): void;\r\n\r\n}\r\n\r\nexport interface ViewportChangeEvent {\r\n    // the following keys appear if each of these got updated from server; the names of those\r\n    // keys suggest what it was that changed; oldValue and newValue are the values for what changed\r\n    // (e.g. new server size and old server size) so not the whole foundset property new/old value\r\n    viewportRowsCompletelyChanged?: { oldValue: any[]; newValue: any[] };\r\n\r\n    // if we received add/remove/change operations on a set of rows from the viewport, this key\r\n    // will be set; as seen below, it contains \"updates\" which is an array that holds a sequence of\r\n    // granular update operations to the viewport; the array will hold one or more granular add or remove\r\n    // or update operations;\r\n    // all the \"startIndex\" and \"endIndex\" values below are relative to the viewport's state after all\r\n    // previous updates in the array were already processed (so they are NOT relative to the initial state);\r\n    // indexes are 0 based\r\n    viewportRowsUpdated?: ViewportRowUpdates;\r\n}\r\n\r\nexport interface FoundsetChangeEvent extends ViewportChangeEvent {\r\n    /**\r\n     * If the previous value was non-null, had listeners and a full value update was\r\n     * received from server, this key is set on the change event; if newValue is non-null, it will keep the same reference as before;\r\n     * it will just update it's contents; oldValue will be a dummy shallow copy of old value contents\r\n     */\r\n    fullValueChanged?: { oldValue: IFoundsetFieldsOnly; newValue: IFoundset };\r\n\r\n    // the following keys appear if each of these got updated from server; the names of those\r\n    // keys suggest what it was that changed; oldValue and newValue are the values for what changed\r\n    // (e.g. new server size and old server size) so not the whole foundset property new/old value\r\n    serverFoundsetSizeChanged?: { oldValue: number; newValue: number };\r\n    hasMoreRowsChanged?: { oldValue: boolean; newValue: boolean };\r\n    multiSelectChanged?: { oldValue: boolean; newValue: boolean };\r\n    columnFormatsChanged?: { oldValue: Record<string, object>; newValue: Record<string, object> };\r\n    sortColumnsChanged?: { oldValue: string; newValue: string };\r\n    selectedRowIndexesChanged?: { oldValue: number[]; newValue: number[] };\r\n    viewPortStartIndexChanged?: { oldValue: number; newValue: number };\r\n    viewPortSizeChanged?: { oldValue: number; newValue: number };\r\n    userSetSelection?: boolean;\r\n}\r\n\r\nexport type ChangeListener = (changeEvent: ViewportChangeEvent) => void;\r\nexport type FoundsetChangeListener = (changeEvent: FoundsetChangeEvent) => void;\r\n\r\nexport interface ViewportRowUpdate { type: ChangeType; startIndex: number; endIndex: number }\r\nexport type ViewportRowUpdates = ViewportRowUpdate[];\r\n\r\nexport enum ChangeType  {\r\n    ROWS_CHANGED = 0,\r\n\r\n    /**\r\n     * When an INSERT happened but viewport size remained the same, it is\r\n     * possible that some of the rows that were previously at the end of the viewport\r\n     * slided out of it;\r\n     * NOTE: insert signifies an insert into the client viewport, not necessarily\r\n     * an insert in the foundset itself; for example calling \"loadExtraRecordsAsync\"\r\n     * can result in an insert notification + bigger viewport size notification\r\n     */\r\n    ROWS_INSERTED,\r\n\r\n    /**\r\n     * When a DELETE happened inside the viewport but there were more rows available in the\r\n     * foundset after current viewport, it is possible that some of those rows\r\n     * slided into the viewport;\r\n     * NOTE: delete signifies a delete from the client viewport, not necessarily\r\n     * a delete in the foundset itself; for example calling \"loadLessRecordsAsync\" can\r\n     * result in a delete notification + smaller viewport size notification\r\n     */\r\n    ROWS_DELETED\r\n}\r\n\r\nexport class BaseCustomObject implements ICustomObject {\r\n    private state = new BaseCustomObjectState();\r\n\r\n    constructor() {\r\n        this.state.allChanged = true;\r\n    }\r\n\r\n    public getStateHolder() {\r\n        return this.state;\r\n    }\r\n\r\n    /**\r\n     *  subclasses can override this to give back the properties that needs to be watched.\r\n     */\r\n    getWatchedProperties(): Array<string> {\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport interface ViewPort {\r\n    startIndex: number;\r\n    size: number;\r\n    rows: ViewPortRow[];\r\n};\r\n\r\nexport interface ViewPortRow extends Record<string, any> {\r\n    _svyRowId: string;\r\n    _cache?: Map<string, any>;\r\n}\r\n\r\nexport class ChangeAwareState {\r\n\r\n    public allChanged = false;\r\n\r\n    private changeListener: () => void;\r\n    private inNotify = false;\r\n\r\n    markAllChanged(notifyListener: boolean): void {\r\n        this.allChanged = true;\r\n        if (notifyListener) this.notifyChangeListener();\r\n    }\r\n\r\n    hasChanges(): boolean {\r\n        return this.allChanged || this.inNotify;\r\n    }\r\n\r\n    setChangeListener(callback: () => void): void {\r\n        this.changeListener = callback;\r\n    }\r\n\r\n    public notifyChangeListener(): void {\r\n        this.inNotify = true;\r\n        if (this.changeListener) this.changeListener();\r\n        this.inNotify = false;\r\n    }\r\n\r\n}\r\n\r\nexport class BaseCustomObjectState extends ChangeAwareState {\r\n\r\n    // provide a hash that lets arrays that contain custom objects know that the object has changed or not\r\n    private static counter = 0;\r\n\r\n    public conversionInfo = {};\r\n    public ignoreChanges = false;\r\n\r\n\r\n    private change = 0;\r\n    private hash = BaseCustomObjectState.counter++;\r\n\r\n    private changedKeys = new Set<string | number>();\r\n\r\n    hasChanges() {\r\n        return super.hasChanges() || this.getChangedKeys().size > 0; // leave this as a method call as some subclasses might compute the changedKeys inside getChangedKeys()\r\n    }\r\n\r\n    public setPropertyAndHandleChanges(_thisBaseCustoomObject, internalPropertyName, propertyName, value) {\r\n        const oldValue = _thisBaseCustoomObject[internalPropertyName];\r\n\r\n        // if the value of this property is changed, mark it as such and notify if needed\r\n        this.markIfChanged(propertyName, value, oldValue);\r\n\r\n        // unregister as listener to old value if needed\r\n        this.setChangeListenerToSubValueIfNeeded(oldValue, undefined);\r\n\r\n        _thisBaseCustoomObject[internalPropertyName] = value;\r\n\r\n        // register as listener to new value if needed\r\n        this.setChangeListenerToSubValueIfNeeded(value, () => {\r\n            this.markIfChanged(propertyName, value, value);\r\n        });\r\n\r\n        // this value has changed by reference; so it needs to be fully sent to server - except for when it now arrived from the server and is being set (in which case ignoreChanges is true)\r\n        if (!this.ignoreChanges && instanceOfChangeAwareValue(value)) value.getStateHolder().markAllChanged(false);\r\n    }\r\n\r\n    public getChangedKeys(): Set<string | number> {\r\n        return this.changedKeys;\r\n    }\r\n\r\n    public clearChanges() {\r\n        this.changedKeys.clear();\r\n        this.allChanged = false;\r\n    }\r\n\r\n    public getHashKey(): string {\r\n        return this.hash + '_' + this.change;\r\n    }\r\n\r\n    protected markIfChanged(propertyName: string | number, newObject: any, oldObject: any) {\r\n        if (this.testChanged(propertyName, newObject, oldObject)) {\r\n            this.pushChange(propertyName);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private setChangeListenerToSubValueIfNeeded(value: any, changeListener: () => void): void {\r\n        if (instanceOfChangeAwareValue(value)) {\r\n            // child is able to handle it's own change mechanism\r\n            value.getStateHolder().setChangeListener(changeListener);\r\n        }\r\n    }\r\n\r\n    private pushChange(propertyName) {\r\n        if (this.ignoreChanges) return;\r\n        if (this.changedKeys.size === 0) this.change++;\r\n\r\n        if (!this.changedKeys.has(propertyName)) {\r\n            this.changedKeys.add(propertyName);\r\n            this.notifyChangeListener();\r\n        }\r\n    }\r\n\r\n    private testChanged(propertyName: string | number, newObject: any, oldObject: any) {\r\n        if (newObject !== oldObject) return true;\r\n        if (typeof newObject == 'object') {\r\n            if (instanceOfChangeAwareValue(newObject)) {\r\n                return newObject.getStateHolder().hasChanges();\r\n            } else {\r\n                return isChanged(newObject, oldObject, this.conversionInfo[propertyName]);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class ArrayState extends BaseCustomObjectState {\r\n    private differ: IterableDiffer<Array<any>>;\r\n\r\n    constructor(private array: Array<any>, private iterableDiffers: IterableDiffers) {\r\n        super();\r\n        this.allChanged = true;\r\n    }\r\n\r\n    public initDiffer() {\r\n        this.differ = this.iterableDiffers.find(this.array).create((index: number, item: any) => {\r\n            if (instanceOfBaseCustomObject(item)) {\r\n                return item.getStateHolder().getHashKey();\r\n            }\r\n            return item;\r\n        });\r\n        this.differ.diff(this.array);\r\n    }\r\n\r\n    public clearChanges() {\r\n        super.clearChanges();\r\n        this.initDiffer();\r\n    }\r\n\r\n    public getChangedKeys(): Set<string | number> {\r\n        let changes = super.getChangedKeys();\r\n        const arrayChanges = this.differ.diff(this.array);\r\n        if (arrayChanges) {\r\n            let addedOrRemoved = 0;\r\n            arrayChanges.forEachAddedItem((record) => {\r\n                addedOrRemoved++;\r\n                changes.add(record.currentIndex);\r\n            });\r\n            arrayChanges.forEachRemovedItem((record) => {\r\n                addedOrRemoved--;\r\n                changes.add(record.previousIndex);\r\n            });\r\n\r\n            arrayChanges.forEachMovedItem((record) => {\r\n                if (instanceOfChangeAwareValue(record.item)) {\r\n                    return record.item.getStateHolder().markAllChanged(false);\r\n                }\r\n            });\r\n            if (addedOrRemoved !== 0) {\r\n                // size changed, for now send whole array\r\n                this.markAllChanged(false);\r\n            } else {\r\n                const changesArray = Array.from(changes);\r\n                changesArray.sort((a: number, b: number) => a - b);\r\n                changes = new Set(changesArray);\r\n            }\r\n        }\r\n        return changes;\r\n    }\r\n\r\n}\r\n\r\nexport interface ColumnRef {\r\n    _svyRowId: string;\r\n    dp: string;\r\n    value: string;\r\n};\r\n\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { TooltipDirective } from './tooltip/tooltip.directive';\r\nimport { TooltipService } from './tooltip/tooltip.service';\r\nimport { DecimalkeyconverterDirective } from './directives/decimalkeyconverter.directive';\r\nimport { MnemonicletterFilterPipe, NotNullOrEmptyPipe, HtmlFilterPipe, TrustAsHtmlPipe} from './format/pipes';\r\nimport { FormatFilterPipe } from './format/format.pipe';\r\nimport { EmptyValueFilterPipe } from './format/emptyvalue.pipe';\r\nimport { StartEditDirective } from './directives/startedit.directive';\r\nimport { ImageMediaIdDirective } from './directives/imagemediaid.directive';\r\nimport {AutosaveDirective } from './directives/autosave.directive';\r\nimport { UploadDirective } from './directives/upload.directive';\r\nimport { FormatDirective } from './format/formatcontrolvalueaccessor.directive';\r\nimport { FormattingService } from './format/formatting.service';\r\nimport { ComponentContributor } from './basecomponent';\r\nimport { SabloTabseq } from './directives/sablotabseq.directive';\r\nimport { WindowRefService } from './services/windowref.service';\r\nimport { SpecTypesService } from './spectypes.service';\r\nimport { LoggerFactory } from './logger.service';\r\n\r\n@NgModule({\r\n    declarations: [ TooltipDirective,\r\n                    MnemonicletterFilterPipe,\r\n                    NotNullOrEmptyPipe,\r\n                    HtmlFilterPipe,\r\n                    FormatDirective,\r\n                    DecimalkeyconverterDirective,\r\n                    FormatFilterPipe,\r\n                    EmptyValueFilterPipe,\r\n                    StartEditDirective,\r\n                    ImageMediaIdDirective,\r\n                    AutosaveDirective,\r\n                    UploadDirective,\r\n                    SabloTabseq,\r\n                    TrustAsHtmlPipe\r\n                  ],\r\n    imports: [],\r\n    exports: [TooltipDirective,\r\n              MnemonicletterFilterPipe,\r\n              NotNullOrEmptyPipe,\r\n              HtmlFilterPipe,\r\n              FormatDirective,\r\n              DecimalkeyconverterDirective,\r\n              FormatFilterPipe,\r\n              EmptyValueFilterPipe,\r\n              StartEditDirective,\r\n              ImageMediaIdDirective,\r\n              AutosaveDirective,\r\n              UploadDirective,\r\n              SabloTabseq,\r\n              TrustAsHtmlPipe\r\n             ],\r\n    providers: [ TooltipService, FormattingService, ComponentContributor, SpecTypesService, WindowRefService, LoggerFactory ]\r\n})\r\nexport class ServoyPublicModule { }\r\n","import { Renderer2 } from '@angular/core';\r\n\r\nconst scrollbarConstants = {\r\n        SCROLLBARS_WHEN_NEEDED: 0,\r\n        VERTICAL_SCROLLBAR_AS_NEEDED: 1,\r\n        VERTICAL_SCROLLBAR_ALWAYS: 2,\r\n        VERTICAL_SCROLLBAR_NEVER: 4,\r\n        HORIZONTAL_SCROLLBAR_AS_NEEDED: 8,\r\n        HORIZONTAL_SCROLLBAR_ALWAYS: 16,\r\n        HORIZONTAL_SCROLLBAR_NEVER: 32\r\n};\r\nexport class PropertyUtils {\r\n\r\n    public static setHorizontalAlignment( element: any, renderer: Renderer2, halign ) {\r\n        if ( halign !== -1 ) {\r\n            if ( halign === 0 ) {\r\n                renderer.setStyle( element, 'text-align', 'center' );\r\n            } else if ( halign === 4 ) {\r\n                renderer.setStyle( element, 'text-align', 'right' );\r\n            } else {\r\n                renderer.setStyle( element, 'text-align', 'left' );\r\n            }\r\n        }\r\n    }\r\n\r\n    public static setRotation(element: HTMLElement, renderer: Renderer2, rotation: number, size: {width: number; height: number}) {\r\n        const r = 'rotate(' + rotation + 'deg)';\r\n        renderer.setStyle( element, '-moz-transform',  r );\r\n        renderer.setStyle( element, '-webkit-transform', r );\r\n        renderer.setStyle( element, '-o-transform', r );\r\n        renderer.setStyle( element, '-ms-transform', r );\r\n        renderer.setStyle( element, 'transform', r );\r\n        renderer.setStyle( element, 'position', 'absolute' );\r\n        if (rotation === 90 || rotation === 270) {\r\n            renderer.setStyle( element, 'width', size.height + 'px' );\r\n            renderer.setStyle( element, 'height', size.width + 'px' );\r\n            renderer.setStyle( element, 'left', (size.width - size.height) / 2 + 'px' );\r\n            renderer.setStyle( element, 'top', (size.height - size.width) / 2 + 'px' );\r\n        }\r\n    }\r\n\r\n    public static setBorder( element: any, renderer: Renderer2, newVal ) {\r\n        if ( typeof newVal !== 'object' || newVal == null ) {\n         renderer.removeStyle( element, 'border' ); return;\n        }\r\n\r\n        if ( renderer.parentNode( element ).nodeName === 'FIELDSET' ) {\r\n            // unwrap fieldset\r\n            const parent = renderer.parentNode( element );\r\n            renderer.insertBefore( renderer.parentNode( parent ), element, parent );\r\n            renderer.removeChild( renderer.parentNode( parent ), parent );\r\n        }\r\n        if ( newVal.type === 'TitledBorder' ) {\r\n            const fieldset = renderer.createElement( 'fieldset' );\r\n            renderer.setAttribute( fieldset, 'style', 'padding:1px;margin:0px;border:1px solid silver;width:100%;height:100%' );\r\n\r\n            const legend = renderer.createElement( 'legend' );\r\n            renderer.setAttribute( legend, 'style', 'border-bottom:0px; margin:0px;width:auto;color:' + newVal.color + ';text-align:' + newVal.titleJustification );\r\n            if ( newVal.font ) {\r\n                for ( const key of Object.keys(newVal.font) ) {\r\n                    // keys like 'fontSize' need to be converted into 'font-size'\r\n                    renderer.setStyle( legend, key.replace( /([a-z])([A-Z])/g, '$1-$2' ).toLowerCase(), newVal.font[key] );\r\n                }\r\n            }\r\n            renderer.appendChild( legend, renderer.createText( newVal.title ) );\r\n\r\n            // this is the way it is done in the old ngclient, but the actual component is positioned partially outside the border\r\n            //            var parent = renderer.parentNode(element);\r\n            //            renderer.insertBefore(parent, fieldset, element);\r\n            //            renderer.appendChild(fieldset, legend);\r\n            //            renderer.appendChild(fieldset, element);\r\n\r\n            renderer.appendChild( fieldset, legend );\r\n            for ( const i in element.childNodes ) {\r\n                if ( element.childNodes[i].nodeType === 1 ) {\r\n                    renderer.appendChild( fieldset, element.childNodes[i] );\r\n                }\r\n            }\r\n            renderer.appendChild( element, fieldset );\r\n\r\n        } else if ( newVal.borderStyle ) {\r\n            renderer.removeStyle( element, 'border' );\r\n            for ( const key of Object.keys(newVal.borderStyle) ) {\r\n                renderer.setStyle( element, key.replace( /([a-z])([A-Z])/g, '$1-$2' ).toLowerCase(), newVal.borderStyle[key] );\r\n            }\r\n        }\r\n    }\r\n\r\n    public static setFont( element: any, renderer: Renderer2, newVal ) {\r\n        if ( typeof newVal !== 'object' || newVal == null ) {\n renderer.removeStyle( element, 'font' ); return;\n}\r\n\r\n        renderer.removeStyle( element, 'font' );\r\n        for ( const key of Object.keys( newVal) ) {\r\n            renderer.setStyle( element, key , newVal[key] );\r\n        }\r\n    }\r\n\r\n    public static setVisible( element: any, renderer: Renderer2, newVal ) {\r\n        let correctElement = element;\r\n        if (renderer.parentNode(renderer.parentNode(element)) === element.closest('.svy-wrapper')) {\r\n            correctElement = renderer.parentNode(renderer.parentNode(element));\r\n        }\r\n        if ( newVal === true ) {\r\n            // can we improve this ?\r\n            renderer.removeStyle( correctElement, 'display' );\r\n        } else if (newVal === false) {\r\n            renderer.setStyle( correctElement, 'display' , 'none' );\r\n        }\r\n    }\r\n\r\n    public static addSelectOnEnter( element: any, renderer: Renderer2, doc: Document ) {\r\n        renderer.listen( element, 'focus', () => {\r\n            setTimeout(() => {\r\n                // this access \"document\" directly which shoudn't really be done, but angular doesn't have encapsuled support for testing \"is(\":focus\")\"\r\n                const currentFocusedElement = doc.querySelector( ':focus' );\r\n                if ( currentFocusedElement === element )\r\n                    element.select();\r\n            }, 0 );\r\n        } );\r\n    }\r\n    public static getScrollbarsStyleObj(scrollbars: number) {\r\n       const style = {};\r\n       /* eslint-disable no-bitwise */\r\n       if ((scrollbars & scrollbarConstants.HORIZONTAL_SCROLLBAR_NEVER) === scrollbarConstants.HORIZONTAL_SCROLLBAR_NEVER) {\r\n         style['overflowX'] = 'hidden';\r\n       } else if ((scrollbars & scrollbarConstants.HORIZONTAL_SCROLLBAR_ALWAYS) === scrollbarConstants.HORIZONTAL_SCROLLBAR_ALWAYS) {\r\n         style['overflowX'] = 'scroll';\r\n       } else {\r\n         style['overflowX'] = 'auto';\r\n       }\r\n\r\n       if ((scrollbars & scrollbarConstants.VERTICAL_SCROLLBAR_NEVER) === scrollbarConstants.VERTICAL_SCROLLBAR_NEVER) {\r\n         style['overflowY'] = 'hidden';\r\n       } else if ((scrollbars & scrollbarConstants.VERTICAL_SCROLLBAR_ALWAYS) === scrollbarConstants.VERTICAL_SCROLLBAR_ALWAYS) {\r\n         style['overflowY'] = 'scroll'; // $NON-NLS-1$\r\n       } else {\r\n         style['overflowY'] = 'auto'; // $NON-NLS-1$\r\n       }\r\n       /* eslint-enable no-bitwise */\r\n       return style;\r\n     }\r\n\r\n     public static setScrollbars(element: any, renderer: Renderer2, value) {\r\n       const style = this.getScrollbarsStyleObj(value);\r\n       Object.keys(style).forEach(key => {\r\n        renderer.setStyle(element, key, style[key]);\r\n       });\r\n     }\r\n     // internal function\r\n     public static getPropByStringPath(o, s) {\r\n       s = s.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\r\n       s = s.replace(/^\\./, '');           // strip a leading dot\r\n       const a = s.split('.');\r\n       while (a.length) {\r\n         const n = a.shift();\r\n         if (n in o) {\r\n           o = o[n];\r\n         } else {\r\n           return;\r\n         }\r\n         return o;\r\n       }\r\n     }\r\n}\r\n","import { DateTime } from 'luxon';\r\n\r\n/**\n * Returns a zero-based index for first day of the week, as used by the specified locale\n * e.g. Sunday (returns 0), or Monday (returns 1)\n *\n * @param locale\n * @returns\n */\r\nexport  const getFirstDayOfWeek = (locale: string): number  => {\r\n    // from http://www.unicode.org/cldr/data/common/supplemental/supplementalData.xml:supplementalData/weekData/firstDay\r\n    const firstDay = {/*default is 1=Monday*/\r\n        bd: 5,\r\n        mv: 5,\r\n        ae: 6,\r\n        af: 6,\r\n        bh: 6,\r\n        dj: 6,\r\n        dz: 6,\r\n        eg: 6,\r\n        iq: 6,\r\n        ir: 6,\r\n        jo: 6,\r\n        kw: 6,\r\n        ly: 6,\r\n        ma: 6,\r\n        om: 6,\r\n        qa: 6,\r\n        sa: 6,\r\n        sd: 6,\r\n        sy: 6,\r\n        ye: 6,\r\n        ag: 0,\r\n        ar: 0,\r\n        as: 0,\r\n        au: 0,\r\n        br: 0,\r\n        bs: 0,\r\n        bt: 0,\r\n        bw: 0,\r\n        by: 0,\r\n        bz: 0,\r\n        ca: 0,\r\n        cn: 0,\r\n        co: 0,\r\n        dm: 0,\r\n        do: 0,\r\n        et: 0,\r\n        gt: 0,\r\n        gu: 0,\r\n        hk: 0,\r\n        hn: 0,\r\n        id: 0,\r\n        ie: 0,\r\n        il: 0,\r\n        in: 0,\r\n        jm: 0,\r\n        jp: 0,\r\n        ke: 0,\r\n        kh: 0,\r\n        kr: 0,\r\n        la: 0,\r\n        mh: 0,\r\n        mm: 0,\r\n        mo: 0,\r\n        mt: 0,\r\n        mx: 0,\r\n        mz: 0,\r\n        ni: 0,\r\n        np: 0,\r\n        nz: 0,\r\n        pa: 0,\r\n        pe: 0,\r\n        ph: 0,\r\n        pk: 0,\r\n        pr: 0,\r\n        py: 0,\r\n        sg: 0,\r\n        sv: 0,\r\n        th: 0,\r\n        tn: 0,\r\n        tt: 0,\r\n        tw: 0,\r\n        um: 0,\r\n        us: 0,\r\n        ve: 0,\r\n        vi: 0,\r\n        ws: 0,\r\n        za: 0,\r\n        zw: 0\r\n    };\r\n\r\n    const split = locale.split('-');\r\n    const country =split.length > 1?split[1].toLowerCase():split[0].toLowerCase();\r\n    const dow = firstDay[country];\r\n    return (dow === undefined) ? 1 : dow; /*Number*/\r\n};\r\n\r\n/**\n * Floors the specified date to the beginning of week.\n *\n * @param date\n * @returns\n */\r\nexport const floorToWeek = (date: DateTime): DateTime => {\r\n    const fd = getFirstDayOfWeek(date.locale);\r\n    const day = date.weekday % 7;   // convert to 0=sunday .. 6=saturday\r\n    const dayAdjust =  day >= fd ? -day + fd : -day + fd - 7;\r\n    return date.plus({days: dayAdjust});\r\n};\n","import { Injectable, NgModule } from '@angular/core';\r\nimport { EventLike, JSEvent } from '../jsevent';\r\nimport { IComponentCache, IFormCache, ServoyPublicService } from '../services/servoy_public.service';\r\nimport { ServoyPublicModule } from '../servoy_public.module';\r\n\r\n@Injectable()\r\nexport class ServoyPublicServiceTestingImpl extends ServoyPublicService {\r\n    private locale: string;\r\n    private messages: { [key: string]: string } = {};\r\n    private forms: { [key: string]: IFormCache } = {};\r\n\r\n    public addForm(name: string, formCache: IFormCache) {\r\n        this.forms[name] = formCache;\r\n    }\r\n\r\n    public getFormCacheByName(containedForm: string): IFormCache {\r\n        if (this.forms[containedForm]) return this.forms[containedForm];\r\n        const form: IFormCache= {\r\n            absolute: true,\r\n            size:  {width: 100, height: 100},\r\n            getComponent: (name: string) => {\r\n                const comp: IComponentCache = {\r\n                    name,\r\n                    model: {}\r\n                };\r\n                return comp;\r\n            }\r\n        };\r\n        return form;\r\n    }\r\n\r\n    public generateServiceUploadUrl(serviceName: string, apiFunctionName: string): string {\r\n         return 'resources/upload/1/svy_services/' + serviceName + '/' + apiFunctionName;\r\n    }\r\n\r\n    public generateUploadUrl(formname: string, componentName: string, propertyName: string): string {\r\n         return 'resources/upload/1' +\r\n            (formname ? '/' + formname : '') +\r\n            (componentName ? '/' + componentName : '') +\r\n            (propertyName ? '/' + propertyName : '');\r\n    }\r\n\r\n    public executeInlineScript<T>(formname: string, script: string, params: any[]): Promise<T> {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n\r\n    public addMessage(key: string, message: string) {\r\n        this.messages[key] = message;\r\n    }\r\n\r\n    public getI18NMessages(...keys: string[]): Promise<any> {\r\n        const resolvedMessages: {[key: string]: string } = {};\r\n        keys.forEach(key => resolvedMessages[key] = this.messages[key]?this.messages[key]:'');\r\n        return Promise.resolve(resolvedMessages); \r\n    }\r\n\r\n    public callService<T>(serviceName: string, methodName: string, argsObject: any, async?: boolean): Promise<T> {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    public setLocale(locale: string) {\r\n        this.locale = locale;\r\n    }\r\n    public getLocale(): string {\r\n        return this.locale ? this.locale : 'en';\r\n    }\r\n    public createJSEvent(event: EventLike, eventType: string, contextFilter?: string, contextFilterElement?: any): JSEvent {\r\n        const ev = new JSEvent();\r\n        ev.eventType = eventType;\r\n        ev.svyType = eventType;\r\n        ev.formName = 'test';\r\n        ev.elementName = 'test';\r\n        ev.timestamp = new Date().getTime();\r\n        return ev;\r\n    }\r\n    public showFileOpenDialog(title: string, multiselect: boolean, acceptFilter: string, url: string): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n\r\n}\r\n@NgModule({\r\n    declarations: [\r\n\r\n    ],\r\n    imports: [\r\n        ServoyPublicModule\r\n    ],\r\n    exports: [\r\n        ServoyPublicModule\r\n    ],\r\n    providers: [\r\n        ServoyPublicServiceTestingImpl, { provide: ServoyPublicService, useExisting: ServoyPublicServiceTestingImpl }\r\n    ],\r\n    schemas: [\r\n\r\n    ]\r\n})\r\nexport class ServoyPublicTestingModule { }\n","import { ChangeDetectorRef } from '@angular/core';\r\nimport { ComponentFixture } from '@angular/core/testing';\r\n\r\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\r\nexport async function runOnPushChangeDetection<T>(cf: ComponentFixture<T>): Promise<any>{\r\n  const cd = cf.debugElement.injector.get<ChangeDetectorRef>(\r\n    ChangeDetectorRef as any\r\n  );\r\n  cd.detectChanges();\r\n  return cf.whenStable();\r\n}\r\n\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Directive","Input","ViewChild","Injectable","LogLevel","Subject","DOCUMENT","Inject","HostListener","getLocaleNumberSymbol","NumberSymbol","Pipe","numbro","DateTime","MaskFormat","NG_VALUE_ACCESSOR","forwardRef","HostBinding","ChangeType","NgModule","ChangeDetectorRef"],"mappings":"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,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;YACL,EAAE,EAAE,CAAC;SACR,CAAC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"}